<footer
  class="footer"
  style="
    --footer-bg: {{ section.settings.background_color }};
    --footer-text: {{ section.settings.text_color }};
    --footer-heading-size: {{ section.settings.heading_font_size }}px;
    --footer-heading-weight: {{ section.settings.heading_font_weight }};
    --footer-body-size: {{ section.settings.body_font_size }}px;
    --footer-body-weight: {{ section.settings.body_font_weight }};
    --footer-link-size: {{ section.settings.link_font_size }}px;
    --footer-link-weight: {{ section.settings.link_font_weight }};
    --footer-padding-top: {{ section.settings.padding_top }}px;
    --footer-padding-bottom: {{ section.settings.padding_bottom }}px;
    --footer-section-gap: {{ section.settings.section_gap }}px;
  "
>
  {%- comment -%} Newsletter Section {%- endcomment -%}
  {%- if section.settings.show_newsletter -%}
    <div class="footer__newsletter full-width">
      <div class="footer__newsletter-inner">
        <h2 class="footer__newsletter-title">
          {{ section.settings.newsletter_title }}
        </h2>

        {%- form 'customer', class: 'footer__newsletter-form' -%}
          <input type="hidden" name="contact[tags]" value="newsletter">
          <div class="footer__newsletter-input-wrap">
            <input
              type="email"
              name="contact[email]"
              class="footer__newsletter-input"
              placeholder="{{ 'footer.newsletter_placeholder' | t }}"
              required
              autocomplete="email"
              aria-label="{{ 'footer.newsletter_placeholder' | t }}"
            >
            <button type="submit" class="footer__newsletter-button">
              {{ section.settings.newsletter_button_text }}
            </button>
          </div>
        {%- endform -%}
      </div>
    </div>
  {%- endif -%}

  {%- comment -%} Main Footer Content {%- endcomment -%}
  <div class="footer__main">
    {%- comment -%} Brand Column - Left Side {%- endcomment -%}
    <div class="footer__brand">
      <div class="footer__logo">
        {%- if section.settings.logo -%}
          {{
            section.settings.logo
            | image_url: width: 400
            | image_tag: class: 'footer__logo-image', loading: 'lazy'
          }}
        {%- else -%}
          <span class="footer__logo-text">{{ shop.name }}</span>
        {%- endif -%}
      </div>

      {%- if section.settings.brand_description != blank -%}
        <p class="footer__description">
          {{ section.settings.brand_description }}
        </p>
      {%- endif -%}

      <div class="footer__social footer__social--desktop">
        {% render 'social-icons', class: 'footer__social-icons' %}
      </div>
    </div>

    {%- comment -%} Menu Columns - Right Side {%- endcomment -%}
    <div class="footer__menus">
      {%- for block in section.blocks -%}
        {%- case block.type -%}
          {%- when 'menu' -%}
            <div class="footer__menu-column" {{ block.shopify_attributes }}>
              {%- comment -%} Desktop Menu {%- endcomment -%}
              <div class="footer__menu-desktop">
                <h3 class="footer__menu-title">
                  {{ block.settings.menu.title }}
                </h3>
                <ul class="footer__menu-list">
                  {%- for link in block.settings.menu.links -%}
                    <li class="footer__menu-item">
                      <a href="{{ link.url }}" class="footer__menu-link">
                        {{ link.title }}
                      </a>
                    </li>
                  {%- endfor -%}
                </ul>
              </div>

              {%- comment -%} Mobile Accordion {%- endcomment -%}
              <details class="footer__menu-mobile">
                <summary class="footer__menu-summary">
                  <span class="footer__menu-title">
                    {{ block.settings.menu.title }}
                  </span>
                  <span class="footer__menu-icon">
                    <svg width="12" height="12" viewBox="0 0 12 12" fill="none" stroke="currentColor" stroke-width="1.5">
                      <path d="M3 4.5L6 7.5L9 4.5"/>
                    </svg>
                  </span>
                </summary>
                <ul class="footer__menu-list">
                  {%- for link in block.settings.menu.links -%}
                    <li class="footer__menu-item">
                      <a href="{{ link.url }}" class="footer__menu-link">
                        {{ link.title }}
                      </a>
                    </li>
                  {%- endfor -%}
                </ul>
              </details>
            </div>
        {%- endcase -%}
      {%- endfor -%}
    </div>
  </div>

  {%- comment -%} Mobile Social Icons {%- endcomment -%}
  <div class="footer__social footer__social--mobile">
    {% render 'social-icons', class: 'footer__social-icons' %}
  </div>

  {%- comment -%} Bottom Bar {%- endcomment -%}
  <div class="footer__bottom">
    <div class="footer__copyright">
      &copy; {{ 'now' | date: '%Y' }} {{ shop.name }}. {{ 'footer.all_rights_reserved' | t }}
    </div>

    {%- if section.settings.show_payment_icons -%}
      <div class="footer__payment">
        {%- for type in shop.enabled_payment_types -%}
          {{ type | payment_type_svg_tag }}
        {%- endfor -%}
      </div>
    {%- endif -%}
  </div>
</footer>

{% stylesheet %}
  .footer {
    background-color: var(--footer-bg);
    color: var(--footer-text);
    padding-top: var(--footer-padding-top);
    padding-bottom: var(--footer-padding-bottom);
  }

  /* Newsletter Section */
  .footer__newsletter {
    background-color: var(--color-accent);
    padding: 48px var(--page-margin);
    margin-bottom: var(--footer-section-gap);
  }

  .footer__newsletter-inner {
    max-width: var(--page-width);
    margin: 0 auto;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 40px;
  }

  .footer__newsletter-title {
    font-family: var(--font-heading-family);
    font-size: 28px;
    font-weight: var(--font-heading-weight);
    color: white;
    margin: 0;
    white-space: nowrap;
  }

  .footer__newsletter-form {
    flex: 1;
    max-width: 500px;
  }

  .footer__newsletter-input-wrap {
    display: flex;
    gap: 0;
  }

  .footer__newsletter-input {
    flex: 1;
    padding: 14px 20px;
    border: none;
    background: white;
    font-family: var(--font-primary-family);
    font-size: 15px;
    color: var(--color-ink);
    outline: none;
  }

  .footer__newsletter-input::placeholder {
    color: var(--color-subtext);
  }

  .footer__newsletter-button {
    padding: 14px 28px;
    background: var(--color-ink);
    color: white;
    border: none;
    font-family: var(--font-primary-family);
    font-size: 14px;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    cursor: pointer;
    transition: background-color 0.2s ease;
  }

  .footer__newsletter-button:hover {
    background: var(--color-accent-dark);
  }

  /* Main Footer */
  .footer__main {
    display: grid;
    grid-template-columns: 1fr 2fr;
    gap: 60px;
    padding: 0 0 var(--footer-section-gap);
  }

  /* Brand Column */
  .footer__brand {
    display: flex;
    flex-direction: column;
    gap: 20px;
  }

  .footer__logo-image {
    max-width: 160px;
    height: auto;
  }

  .footer__logo-text {
    font-family: var(--font-heading-family);
    font-size: 24px;
    font-weight: var(--font-heading-weight);
  }

  .footer__description {
    font-size: var(--footer-body-size);
    font-weight: var(--footer-body-weight);
    line-height: 1.6;
    color: var(--footer-text);
    max-width: 280px;
    margin: 0;
  }

  /* Social Icons */
  .footer__social--desktop {
    display: block;
  }

  .footer__social--mobile {
    display: none;
  }

  .footer__social-icons {
    display: flex;
    gap: 16px;
  }

  .footer__social-icons a {
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--footer-text);
    transition: opacity 0.2s ease;
  }

  .footer__social-icons a:hover {
    opacity: 0.7;
  }

  .footer__social-icons svg {
    width: 20px;
    height: 20px;
  }

  /* Menu Columns */
  .footer__menus {
    display: flex;
    justify-content: flex-end;
    gap: 60px;
  }

  .footer__menu-column {
    min-width: 140px;
  }

  .footer__menu-desktop {
    display: block;
  }

  .footer__menu-mobile {
    display: none;
  }

  .footer__menu-title {
    font-family: var(--font-primary-family);
    font-size: var(--footer-heading-size);
    font-weight: var(--footer-heading-weight);
    text-transform: uppercase;
    letter-spacing: 0.08em;
    margin: 0 0 20px;
  }

  .footer__menu-list {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    flex-direction: column;
    gap: 12px;
  }

  .footer__menu-link {
    font-size: var(--footer-link-size);
    font-weight: var(--footer-link-weight);
    color: var(--footer-text);
    text-decoration: none;
    transition: opacity 0.2s ease;
  }

  .footer__menu-link:hover {
    opacity: 0.7;
  }

  /* Bottom Bar */
  .footer__bottom {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-top: var(--footer-section-gap);
    border-top: 1px solid var(--color-border);
  }

  .footer__copyright {
    font-size: 13px;
    color: var(--color-subtext);
  }

  .footer__payment {
    display: flex;
    gap: 8px;
  }

  .footer__payment svg {
    height: 24px;
    width: auto;
  }

  /* Mobile Styles */
  @media screen and (max-width: 768px) {
    .footer__newsletter-inner {
      flex-direction: column;
      align-items: stretch;
      gap: 20px;
      text-align: center;
    }

    .footer__newsletter-title {
      font-size: 22px;
      white-space: normal;
    }

    .footer__newsletter-form {
      max-width: none;
    }

    .footer__newsletter-input-wrap {
      flex-direction: column;
      gap: 12px;
    }

    .footer__newsletter-input,
    .footer__newsletter-button {
      width: 100%;
    }

    .footer__main {
      grid-template-columns: 1fr;
      gap: 32px;
    }

    .footer__brand {
      gap: 16px;
    }

    .footer__description {
      max-width: none;
    }

    .footer__social--desktop {
      display: none;
    }

    .footer__social--mobile {
      display: block;
      padding: 24px 0;
      border-top: 1px solid var(--color-border);
    }

    .footer__social--mobile .footer__social-icons {
      justify-content: center;
    }

    /* Mobile Accordion Menus */
    .footer__menus {
      flex-direction: column;
      gap: 0;
    }

    .footer__menu-column {
      border-top: 1px solid var(--color-border);
    }

    .footer__menu-desktop {
      display: none;
    }

    .footer__menu-mobile {
      display: block;
    }

    .footer__menu-summary {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 16px 0;
      cursor: pointer;
      list-style: none;
    }

    .footer__menu-summary::-webkit-details-marker {
      display: none;
    }

    .footer__menu-summary .footer__menu-title {
      margin: 0;
      font-size: 13px;
    }

    .footer__menu-icon {
      transition: transform 0.2s ease;
    }

    .footer__menu-mobile[open] .footer__menu-icon {
      transform: rotate(180deg);
    }

    .footer__menu-mobile .footer__menu-list {
      padding-bottom: 16px;
    }

    .footer__menu-mobile .footer__menu-link {
      text-transform: uppercase;
      font-size: 12px;
      letter-spacing: 0.05em;
    }

    .footer__bottom {
      flex-direction: column;
      gap: 16px;
      text-align: center;
    }
  }
{% endstylesheet %}

{% javascript %}
  // Optional: Close other accordions when one opens
  document.querySelectorAll('.footer__menu-mobile').forEach(details => {
    details.addEventListener('toggle', (e) => {
      if (details.open) {
        document.querySelectorAll('.footer__menu-mobile').forEach(other => {
          if (other !== details && other.open) {
            other.open = false;
          }
        });
      }
    });
  });
{% endjavascript %}

{% schema %}
{
  "name": "t:sections.footer.name",
  "class": "footer-section",
  "settings": [
    {
      "type": "header",
      "content": "t:sections.footer.settings.newsletter.header"
    },
    {
      "type": "checkbox",
      "id": "show_newsletter",
      "label": "t:sections.footer.settings.newsletter.show",
      "default": true
    },
    {
      "type": "text",
      "id": "newsletter_title",
      "label": "t:sections.footer.settings.newsletter.title",
      "default": "Join our newsletter"
    },
    {
      "type": "text",
      "id": "newsletter_button_text",
      "label": "t:sections.footer.settings.newsletter.button_text",
      "default": "Join"
    },
    {
      "type": "header",
      "content": "t:sections.footer.settings.brand.header"
    },
    {
      "type": "image_picker",
      "id": "logo",
      "label": "t:sections.footer.settings.brand.logo"
    },
    {
      "type": "textarea",
      "id": "brand_description",
      "label": "t:sections.footer.settings.brand.description",
      "default": "We curate lighting that turns houses into sanctuaries. Banish the harshness."
    },
    {
      "type": "header",
      "content": "t:sections.footer.settings.colors.header"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "t:sections.footer.settings.colors.background",
      "default": "#F7F5F0"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "t:sections.footer.settings.colors.text",
      "default": "#1C1917"
    },
    {
      "type": "header",
      "content": "t:sections.footer.settings.typography.header"
    },
    {
      "type": "range",
      "id": "heading_font_size",
      "label": "t:sections.footer.settings.typography.heading_size",
      "min": 10,
      "max": 18,
      "step": 1,
      "default": 12,
      "unit": "px"
    },
    {
      "type": "select",
      "id": "heading_font_weight",
      "label": "t:sections.footer.settings.typography.heading_weight",
      "options": [
        { "value": "400", "label": "t:options.font_weight.regular" },
        { "value": "500", "label": "t:options.font_weight.medium" },
        { "value": "600", "label": "t:options.font_weight.semibold" },
        { "value": "700", "label": "t:options.font_weight.bold" }
      ],
      "default": "500"
    },
    {
      "type": "range",
      "id": "body_font_size",
      "label": "t:sections.footer.settings.typography.body_size",
      "min": 12,
      "max": 18,
      "step": 1,
      "default": 14,
      "unit": "px"
    },
    {
      "type": "select",
      "id": "body_font_weight",
      "label": "t:sections.footer.settings.typography.body_weight",
      "options": [
        { "value": "400", "label": "t:options.font_weight.regular" },
        { "value": "500", "label": "t:options.font_weight.medium" }
      ],
      "default": "400"
    },
    {
      "type": "range",
      "id": "link_font_size",
      "label": "t:sections.footer.settings.typography.link_size",
      "min": 12,
      "max": 18,
      "step": 1,
      "default": 14,
      "unit": "px"
    },
    {
      "type": "select",
      "id": "link_font_weight",
      "label": "t:sections.footer.settings.typography.link_weight",
      "options": [
        { "value": "400", "label": "t:options.font_weight.regular" },
        { "value": "500", "label": "t:options.font_weight.medium" }
      ],
      "default": "400"
    },
    {
      "type": "header",
      "content": "t:sections.footer.settings.spacing.header"
    },
    {
      "type": "range",
      "id": "padding_top",
      "label": "t:sections.footer.settings.spacing.padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "default": 0,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "label": "t:sections.footer.settings.spacing.padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "default": 48,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "section_gap",
      "label": "t:sections.footer.settings.spacing.section_gap",
      "min": 20,
      "max": 80,
      "step": 4,
      "default": 48,
      "unit": "px"
    },
    {
      "type": "header",
      "content": "t:sections.footer.settings.bottom.header"
    },
    {
      "type": "checkbox",
      "id": "show_payment_icons",
      "label": "t:sections.footer.settings.bottom.show_payment_icons",
      "default": true
    }
  ],
  "blocks": [
    {
      "type": "menu",
      "name": "t:sections.footer.blocks.menu.name",
      "settings": [
        {
          "type": "link_list",
          "id": "menu",
          "label": "t:sections.footer.blocks.menu.settings.menu",
          "default": "footer"
        }
      ]
    }
  ],
  "default": {
    "blocks": [
      {
        "type": "menu"
      },
      {
        "type": "menu"
      },
      {
        "type": "menu"
      }
    ]
  }
}
{% endschema %}
