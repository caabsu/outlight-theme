{% comment %}
  Blog Journal Section
  Editorial blog listing with featured article and article grid
{% endcomment %}

<section
  class="blog-journal"
  style="
    --bj-bg: {{ section.settings.background_color }};
    --bj-label-color: {{ section.settings.label_color }};
    --bj-title-color: {{ section.settings.title_color }};
    --bj-featured-title-size: {{ section.settings.featured_title_size }}px;
    --bj-featured-title-size-mobile: {{ section.settings.featured_title_size_mobile }}px;
    --bj-excerpt-color: {{ section.settings.excerpt_color }};
    --bj-link-color: {{ section.settings.link_color }};
    --bj-card-title-size: {{ section.settings.card_title_size }}px;
    --bj-card-title-size-mobile: {{ section.settings.card_title_size_mobile }}px;
    --bj-padding-top: {{ section.settings.padding_top }}px;
    --bj-padding-bottom: {{ section.settings.padding_bottom }}px;
    --bj-padding-top-mobile: {{ section.settings.padding_top_mobile }}px;
    --bj-padding-bottom-mobile: {{ section.settings.padding_bottom_mobile }}px;
  "
>
  <div class="blog-journal__container">
    {%- comment -%} Featured Article {%- endcomment -%}
    {%- assign featured_article = blog.articles.first -%}
    {%- if featured_article -%}
      <article class="blog-journal__featured">
        <a href="{{ featured_article.url }}" class="blog-journal__featured-image">
          {%- if featured_article.image -%}
            {{ featured_article.image | image_url: width: 1200 | image_tag: loading: 'lazy' }}
          {%- else -%}
            {{ 'lifestyle-1' | placeholder_svg_tag: 'placeholder-svg' }}
          {%- endif -%}
        </a>
        <div class="blog-journal__featured-content">
          <span class="blog-journal__featured-label">{{ section.settings.featured_label | default: 'FEATURED STORY' | upcase }}</span>
          <h2 class="blog-journal__featured-title">
            <a href="{{ featured_article.url }}">{{ featured_article.title }}</a>
          </h2>
          {%- if featured_article.excerpt != blank -%}
            <p class="blog-journal__featured-excerpt">{{ featured_article.excerpt | strip_html | truncate: 160 }}</p>
          {%- endif -%}
          <a href="{{ featured_article.url }}" class="blog-journal__featured-link">{{ section.settings.read_text | default: 'READ ARTICLE' | upcase }}</a>
        </div>
      </article>

      {%- comment -%} Mobile Featured {%- endcomment -%}
      <article class="blog-journal__featured-mobile">
        <a href="{{ featured_article.url }}" class="blog-journal__featured-mobile-image">
          {%- if featured_article.image -%}
            {{ featured_article.image | image_url: width: 800 | image_tag: loading: 'lazy' }}
          {%- else -%}
            {{ 'lifestyle-1' | placeholder_svg_tag: 'placeholder-svg' }}
          {%- endif -%}
        </a>
        <div class="blog-journal__featured-mobile-content">
          <span class="blog-journal__featured-label">{{ section.settings.featured_label_mobile | default: 'FEATURED' | upcase }}</span>
          <h2 class="blog-journal__featured-mobile-title">
            <a href="{{ featured_article.url }}">{{ featured_article.title }}</a>
          </h2>
          <a href="{{ featured_article.url }}" class="blog-journal__featured-link">{{ section.settings.read_text | default: 'READ ARTICLE' | upcase }}</a>
        </div>
      </article>
    {%- endif -%}

    {%- comment -%} Article Grid (Desktop) {%- endcomment -%}
    {%- assign remaining_articles = blog.articles | slice: 1, 100 -%}
    {%- if remaining_articles.size > 0 -%}
      <div class="blog-journal__grid">
        {%- for article in remaining_articles -%}
          <article class="blog-journal__card">
            <a href="{{ article.url }}" class="blog-journal__card-image">
              {%- if article.image -%}
                {{ article.image | image_url: width: 800 | image_tag: loading: 'lazy' }}
              {%- else -%}
                {{ 'lifestyle-1' | placeholder_svg_tag: 'placeholder-svg' }}
              {%- endif -%}
            </a>
            <div class="blog-journal__card-content">
              {%- if article.tags.size > 0 -%}
                <span class="blog-journal__card-label">{{ article.tags.first | upcase }}</span>
              {%- endif -%}
              <h3 class="blog-journal__card-title">
                <a href="{{ article.url }}">{{ article.title }}</a>
              </h3>
            </div>
          </article>
        {%- endfor -%}
      </div>
    {%- endif -%}

    {%- comment -%} Article List (Mobile) {%- endcomment -%}
    {%- if remaining_articles.size > 0 -%}
      <div class="blog-journal__list">
        {%- for article in remaining_articles -%}
          <article class="blog-journal__list-item">
            <a href="{{ article.url }}" class="blog-journal__list-image">
              {%- if article.image -%}
                {{ article.image | image_url: width: 200 | image_tag: loading: 'lazy' }}
              {%- else -%}
                {{ 'lifestyle-1' | placeholder_svg_tag: 'placeholder-svg' }}
              {%- endif -%}
            </a>
            <div class="blog-journal__list-content">
              {%- if article.tags.size > 0 -%}
                <span class="blog-journal__list-label">{{ article.tags.first | upcase }}</span>
              {%- endif -%}
              <h3 class="blog-journal__list-title">
                <a href="{{ article.url }}">{{ article.title }}</a>
              </h3>
            </div>
          </article>
        {%- endfor -%}
      </div>
    {%- endif -%}
  </div>
</section>

{% stylesheet %}
  .blog-journal {
    background-color: var(--bj-bg);
    padding: var(--bj-padding-top-mobile) 12px var(--bj-padding-bottom-mobile);
  }

  .blog-journal__container {
    max-width: 1400px;
    margin: 0 auto;
  }

  /* Featured - Desktop (hidden on mobile) */
  .blog-journal__featured {
    display: none;
  }

  /* Featured - Mobile */
  .blog-journal__featured-mobile {
    display: block;
    margin-bottom: 2rem;
  }

  .blog-journal__featured-mobile-image {
    display: block;
    aspect-ratio: 4 / 3;
    overflow: hidden;
    margin-bottom: 1rem;
  }

  .blog-journal__featured-mobile-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .blog-journal__featured-mobile-content {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  .blog-journal__featured-label {
    font-family: var(--font-body-family), sans-serif;
    font-size: 11px;
    font-weight: 600;
    letter-spacing: 0.1em;
    color: var(--bj-label-color);
  }

  .blog-journal__featured-mobile-title {
    font-family: var(--font-heading-family), serif;
    font-size: var(--bj-featured-title-size-mobile);
    font-weight: 400;
    color: var(--bj-title-color);
    margin: 0;
    line-height: 1.2;
  }

  .blog-journal__featured-mobile-title a {
    color: inherit;
    text-decoration: none;
  }

  .blog-journal__featured-link {
    font-family: var(--font-body-family), sans-serif;
    font-size: 12px;
    font-weight: 600;
    letter-spacing: 0.08em;
    color: var(--bj-link-color);
    text-decoration: underline;
    text-underline-offset: 3px;
    margin-top: 0.25rem;
  }

  /* Grid - Desktop (hidden on mobile) */
  .blog-journal__grid {
    display: none;
  }

  /* List - Mobile */
  .blog-journal__list {
    display: flex;
    flex-direction: column;
    gap: 1.25rem;
  }

  .blog-journal__list-item {
    display: flex;
    gap: 1rem;
    align-items: flex-start;
  }

  .blog-journal__list-image {
    flex-shrink: 0;
    width: 80px;
    height: 80px;
    overflow: hidden;
  }

  .blog-journal__list-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .blog-journal__list-content {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
    padding-top: 0.25rem;
  }

  .blog-journal__list-label {
    font-family: var(--font-body-family), sans-serif;
    font-size: 10px;
    font-weight: 600;
    letter-spacing: 0.1em;
    color: var(--bj-label-color);
  }

  .blog-journal__list-title {
    font-family: var(--font-heading-family), serif;
    font-size: 16px;
    font-weight: 400;
    color: var(--bj-title-color);
    margin: 0;
    line-height: 1.3;
  }

  .blog-journal__list-title a {
    color: inherit;
    text-decoration: none;
  }

  /* Desktop Styles */
  @media (min-width: 768px) {
    .blog-journal {
      padding: var(--bj-padding-top) 24px var(--bj-padding-bottom);
    }

    /* Featured - Desktop */
    .blog-journal__featured {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 4rem;
      align-items: center;
      margin-bottom: 4rem;
    }

    .blog-journal__featured-image {
      display: block;
      aspect-ratio: 4 / 3;
      overflow: hidden;
    }

    .blog-journal__featured-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.4s ease;
    }

    .blog-journal__featured-image:hover img {
      transform: scale(1.03);
    }

    .blog-journal__featured-content {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .blog-journal__featured-title {
      font-family: var(--font-heading-family), serif;
      font-size: var(--bj-featured-title-size);
      font-weight: 400;
      color: var(--bj-title-color);
      margin: 0;
      line-height: 1.15;
    }

    .blog-journal__featured-title a {
      color: inherit;
      text-decoration: none;
    }

    .blog-journal__featured-excerpt {
      font-family: var(--font-heading-family), serif;
      font-size: 17px;
      font-weight: 400;
      color: var(--bj-excerpt-color);
      line-height: 1.6;
      margin: 0;
    }

    .blog-journal__featured-link {
      margin-top: 0.5rem;
    }

    /* Hide mobile featured */
    .blog-journal__featured-mobile {
      display: none;
    }

    /* Grid - Desktop */
    .blog-journal__grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 2rem;
    }

    .blog-journal__card-image {
      display: block;
      aspect-ratio: 4 / 3;
      overflow: hidden;
      margin-bottom: 1rem;
    }

    .blog-journal__card-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.4s ease;
    }

    .blog-journal__card:hover .blog-journal__card-image img {
      transform: scale(1.03);
    }

    .blog-journal__card-content {
      display: flex;
      flex-direction: column;
      gap: 0.375rem;
    }

    .blog-journal__card-label {
      font-family: var(--font-body-family), sans-serif;
      font-size: 11px;
      font-weight: 600;
      letter-spacing: 0.1em;
      color: var(--bj-label-color);
    }

    .blog-journal__card-title {
      font-family: var(--font-heading-family), serif;
      font-size: var(--bj-card-title-size);
      font-weight: 400;
      color: var(--bj-title-color);
      margin: 0;
      line-height: 1.25;
    }

    .blog-journal__card-title a {
      color: inherit;
      text-decoration: none;
    }

    /* Hide mobile list */
    .blog-journal__list {
      display: none;
    }
  }

  @media (min-width: 1200px) {
    .blog-journal__featured {
      gap: 6rem;
    }
  }
{% endstylesheet %}

{% schema %}
{
  "name": "Blog journal",
  "settings": [
    {
      "type": "header",
      "content": "Featured article"
    },
    {
      "type": "text",
      "id": "featured_label",
      "label": "Featured label (desktop)",
      "default": "Featured Story"
    },
    {
      "type": "text",
      "id": "featured_label_mobile",
      "label": "Featured label (mobile)",
      "default": "Featured"
    },
    {
      "type": "text",
      "id": "read_text",
      "label": "Read article text",
      "default": "Read Article"
    },
    {
      "type": "header",
      "content": "Typography"
    },
    {
      "type": "color",
      "id": "label_color",
      "label": "Label color",
      "default": "#D97706"
    },
    {
      "type": "color",
      "id": "title_color",
      "label": "Title color",
      "default": "#1C1917"
    },
    {
      "type": "range",
      "id": "featured_title_size",
      "label": "Featured title size (desktop)",
      "min": 32,
      "max": 72,
      "step": 2,
      "default": 48,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "featured_title_size_mobile",
      "label": "Featured title size (mobile)",
      "min": 24,
      "max": 42,
      "step": 2,
      "default": 32,
      "unit": "px"
    },
    {
      "type": "color",
      "id": "excerpt_color",
      "label": "Excerpt color",
      "default": "#57534E"
    },
    {
      "type": "color",
      "id": "link_color",
      "label": "Link color",
      "default": "#1C1917"
    },
    {
      "type": "range",
      "id": "card_title_size",
      "label": "Card title size (desktop)",
      "min": 16,
      "max": 32,
      "step": 1,
      "default": 22,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "card_title_size_mobile",
      "label": "Card title size (mobile)",
      "min": 14,
      "max": 24,
      "step": 1,
      "default": 16,
      "unit": "px"
    },
    {
      "type": "header",
      "content": "Section style"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background color",
      "default": "#F7F5F0"
    },
    {
      "type": "range",
      "id": "padding_top",
      "label": "Padding top (desktop)",
      "min": 0,
      "max": 150,
      "step": 5,
      "default": 60,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "label": "Padding bottom (desktop)",
      "min": 0,
      "max": 150,
      "step": 5,
      "default": 80,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "padding_top_mobile",
      "label": "Padding top (mobile)",
      "min": 0,
      "max": 100,
      "step": 5,
      "default": 40,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "padding_bottom_mobile",
      "label": "Padding bottom (mobile)",
      "min": 0,
      "max": 100,
      "step": 5,
      "default": 60,
      "unit": "px"
    }
  ],
  "presets": [
    {
      "name": "Blog journal"
    }
  ]
}
{% endschema %}
