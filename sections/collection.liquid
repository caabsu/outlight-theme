{% comment %}
  Collection page with hero image header
{% endcomment %}

<div class="collection-page">
  {%- comment -%} Hero Section {%- endcomment -%}
  <div class="collection-hero" style="
    --hero-height-mobile: {{ section.settings.hero_height_mobile }}px;
    --hero-height-desktop: {{ section.settings.hero_height_desktop }}px;
    --hero-overlay-opacity: {{ section.settings.overlay_opacity | divided_by: 100.0 }};
    --title-size-mobile: {{ section.settings.title_size_mobile }}px;
    --title-size-desktop: {{ section.settings.title_size_desktop }}px;
    --title-color: {{ section.settings.title_color }};
    --title-weight: {{ section.settings.title_weight }};
    --subtitle-size-mobile: {{ section.settings.subtitle_size_mobile }}px;
    --subtitle-size-desktop: {{ section.settings.subtitle_size_desktop }}px;
    --subtitle-color: {{ section.settings.subtitle_color }};
    --subtitle-weight: {{ section.settings.subtitle_weight }};
  ">
    <div class="collection-hero__image-wrapper">
      {%- if section.settings.hero_image != blank -%}
        {{ section.settings.hero_image | image_url: width: 1920 | image_tag: class: 'collection-hero__image', loading: 'eager' }}
      {%- elsif collection.image -%}
        {{ collection.image | image_url: width: 1920 | image_tag: class: 'collection-hero__image', loading: 'eager' }}
      {%- else -%}
        <div class="collection-hero__placeholder"></div>
      {%- endif -%}
      <div class="collection-hero__overlay"></div>
    </div>

    <div class="collection-hero__content">
      <h1 class="collection-hero__title">{{ section.settings.custom_title | default: collection.title }}</h1>
      {%- if section.settings.subtitle != blank -%}
        <p class="collection-hero__subtitle">{{ section.settings.subtitle }}</p>
      {%- endif -%}
    </div>
  </div>

  {%- comment -%} Products Grid {%- endcomment -%}
  <div class="collection-products" style="
    --products-gap: {{ section.settings.products_gap }}px;
    --product-title-size: {{ section.settings.product_title_size }}px;
    --product-title-color: {{ section.settings.product_title_color }};
    --product-title-weight: {{ section.settings.product_title_weight }};
    --product-price-size: {{ section.settings.product_price_size }}px;
    --product-price-color: {{ section.settings.product_price_color }};
    --product-price-weight: {{ section.settings.product_price_weight }};
  ">
    {% paginate collection.products by section.settings.products_per_page %}
      <div class="collection-products__grid">
        {% for product in collection.products %}
          <a href="{{ product.url }}" class="collection-product">
            <div class="collection-product__image-wrapper">
              {% if product.featured_image %}
                {{ product.featured_image | image_url: width: 600, height: 600, crop: 'center' | image_tag: class: 'collection-product__image', loading: 'lazy' }}
              {% else %}
                <div class="collection-product__placeholder"></div>
              {% endif %}
            </div>
            <div class="collection-product__content">
              <h3 class="collection-product__title">{{ product.title }}</h3>
              <p class="collection-product__price">{{ product.price | money }}</p>
            </div>
          </a>
        {% endfor %}
      </div>

      {%- if paginate.pages > 1 -%}
        <div class="collection-pagination">
          {{ paginate | default_pagination }}
        </div>
      {%- endif -%}
    {% endpaginate %}
  </div>
</div>

{% stylesheet %}
  .collection-page {
    width: 100%;
  }

  /* Hero Section */
  .collection-hero {
    position: relative;
    width: 100%;
    height: var(--hero-height-mobile, 300px);
    overflow: hidden;
  }

  .collection-hero__image-wrapper {
    position: absolute;
    inset: 0;
  }

  .collection-hero__image {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .collection-hero__placeholder {
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, #E7E5E4 0%, #D6D3D1 100%);
  }

  .collection-hero__overlay {
    position: absolute;
    inset: 0;
    background: rgba(0, 0, 0, var(--hero-overlay-opacity, 0.3));
  }

  .collection-hero__content {
    position: absolute;
    inset: 0;
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
    align-items: flex-start;
    padding: 24px 16px;
    z-index: 1;
  }

  .collection-hero__title {
    font-family: var(--font-heading-family), serif;
    font-size: var(--title-size-mobile, 36px);
    font-weight: var(--title-weight, 400);
    color: var(--title-color, #ffffff);
    margin: 0;
    line-height: 1.1;
  }

  .collection-hero__subtitle {
    font-family: var(--font-body-family), sans-serif;
    font-size: var(--subtitle-size-mobile, 14px);
    font-weight: var(--subtitle-weight, 400);
    color: var(--subtitle-color, rgba(255, 255, 255, 0.8));
    margin: 8px 0 0;
    line-height: 1.4;
  }

  /* Products Grid */
  .collection-products {
    padding: 24px 16px 48px;
    max-width: 1400px;
    margin: 0 auto;
  }

  .collection-products__grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--products-gap, 16px);
  }

  .collection-product {
    text-decoration: none;
    color: inherit;
    display: block;
  }

  .collection-product__image-wrapper {
    aspect-ratio: 1 / 1;
    overflow: hidden;
    background-color: #f5f5f5;
    margin-bottom: 12px;
  }

  .collection-product__image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.3s ease;
  }

  .collection-product:hover .collection-product__image {
    transform: scale(1.03);
  }

  .collection-product__placeholder {
    width: 100%;
    height: 100%;
    background-color: #e5e5e5;
  }

  .collection-product__content {
    padding: 0 4px;
  }

  .collection-product__title {
    font-family: var(--font-heading-family), serif;
    font-size: var(--product-title-size, 16px);
    font-weight: var(--product-title-weight, 400);
    color: var(--product-title-color, #1C1917);
    margin: 0 0 4px;
    line-height: 1.3;
  }

  .collection-product__price {
    font-family: var(--font-body-family), sans-serif;
    font-size: var(--product-price-size, 14px);
    font-weight: var(--product-price-weight, 400);
    color: var(--product-price-color, #78716C);
    margin: 0;
  }

  .collection-pagination {
    margin-top: 40px;
    display: flex;
    justify-content: center;
    gap: 8px;
  }

  .collection-pagination a,
  .collection-pagination span {
    padding: 8px 12px;
    font-size: 14px;
    color: #1C1917;
    text-decoration: none;
  }

  .collection-pagination span.current {
    font-weight: 600;
  }

  /* Desktop */
  @media (min-width: 768px) {
    .collection-hero {
      height: var(--hero-height-desktop, 450px);
    }

    .collection-hero__content {
      padding: 40px;
    }

    .collection-hero__title {
      font-size: var(--title-size-desktop, 56px);
    }

    .collection-hero__subtitle {
      font-size: var(--subtitle-size-desktop, 16px);
      margin-top: 12px;
    }

    .collection-products {
      padding: 40px 40px 80px;
    }

    .collection-products__grid {
      grid-template-columns: repeat(3, 1fr);
      gap: var(--products-gap, 24px);
    }

    .collection-product__image-wrapper {
      margin-bottom: 16px;
    }

    .collection-product__title {
      font-size: calc(var(--product-title-size, 16px) + 2px);
    }
  }

  @media (min-width: 1024px) {
    .collection-products__grid {
      grid-template-columns: repeat(4, 1fr);
    }

    .collection-hero__content {
      padding: 60px;
    }
  }

  @media (min-width: 1200px) {
    .collection-products {
      padding: 48px 60px 100px;
    }
  }
{% endstylesheet %}

{% schema %}
{
  "name": "Collection Page",
  "settings": [
    {
      "type": "header",
      "content": "Hero Image"
    },
    {
      "type": "image_picker",
      "id": "hero_image",
      "label": "Hero image",
      "info": "Falls back to collection image if not set"
    },
    {
      "type": "range",
      "id": "hero_height_mobile",
      "label": "Hero height (mobile)",
      "min": 200,
      "max": 500,
      "step": 25,
      "unit": "px",
      "default": 300
    },
    {
      "type": "range",
      "id": "hero_height_desktop",
      "label": "Hero height (desktop)",
      "min": 300,
      "max": 700,
      "step": 25,
      "unit": "px",
      "default": 450
    },
    {
      "type": "range",
      "id": "overlay_opacity",
      "label": "Overlay opacity",
      "min": 0,
      "max": 80,
      "step": 5,
      "unit": "%",
      "default": 30
    },
    {
      "type": "header",
      "content": "Title"
    },
    {
      "type": "text",
      "id": "custom_title",
      "label": "Custom title",
      "info": "Leave blank to use collection title"
    },
    {
      "type": "range",
      "id": "title_size_mobile",
      "label": "Title size (mobile)",
      "min": 24,
      "max": 60,
      "step": 2,
      "unit": "px",
      "default": 36
    },
    {
      "type": "range",
      "id": "title_size_desktop",
      "label": "Title size (desktop)",
      "min": 32,
      "max": 80,
      "step": 2,
      "unit": "px",
      "default": 56
    },
    {
      "type": "color",
      "id": "title_color",
      "label": "Title color",
      "default": "#ffffff"
    },
    {
      "type": "select",
      "id": "title_weight",
      "label": "Title weight",
      "options": [
        { "value": "300", "label": "Light" },
        { "value": "400", "label": "Regular" },
        { "value": "500", "label": "Medium" },
        { "value": "600", "label": "Semibold" },
        { "value": "700", "label": "Bold" }
      ],
      "default": "400"
    },
    {
      "type": "header",
      "content": "Subtitle"
    },
    {
      "type": "text",
      "id": "subtitle",
      "label": "Subtitle"
    },
    {
      "type": "range",
      "id": "subtitle_size_mobile",
      "label": "Subtitle size (mobile)",
      "min": 12,
      "max": 24,
      "step": 1,
      "unit": "px",
      "default": 14
    },
    {
      "type": "range",
      "id": "subtitle_size_desktop",
      "label": "Subtitle size (desktop)",
      "min": 14,
      "max": 28,
      "step": 1,
      "unit": "px",
      "default": 16
    },
    {
      "type": "color",
      "id": "subtitle_color",
      "label": "Subtitle color",
      "default": "#ffffff"
    },
    {
      "type": "select",
      "id": "subtitle_weight",
      "label": "Subtitle weight",
      "options": [
        { "value": "300", "label": "Light" },
        { "value": "400", "label": "Regular" },
        { "value": "500", "label": "Medium" },
        { "value": "600", "label": "Semibold" },
        { "value": "700", "label": "Bold" }
      ],
      "default": "400"
    },
    {
      "type": "header",
      "content": "Products Grid"
    },
    {
      "type": "range",
      "id": "products_per_page",
      "label": "Products per page",
      "min": 8,
      "max": 48,
      "step": 4,
      "default": 20
    },
    {
      "type": "range",
      "id": "products_gap",
      "label": "Gap between products",
      "min": 8,
      "max": 40,
      "step": 4,
      "unit": "px",
      "default": 16
    },
    {
      "type": "header",
      "content": "Product Title"
    },
    {
      "type": "range",
      "id": "product_title_size",
      "label": "Product title size",
      "min": 12,
      "max": 24,
      "step": 1,
      "unit": "px",
      "default": 16
    },
    {
      "type": "color",
      "id": "product_title_color",
      "label": "Product title color",
      "default": "#1C1917"
    },
    {
      "type": "select",
      "id": "product_title_weight",
      "label": "Product title weight",
      "options": [
        { "value": "300", "label": "Light" },
        { "value": "400", "label": "Regular" },
        { "value": "500", "label": "Medium" },
        { "value": "600", "label": "Semibold" },
        { "value": "700", "label": "Bold" }
      ],
      "default": "400"
    },
    {
      "type": "header",
      "content": "Product Price"
    },
    {
      "type": "range",
      "id": "product_price_size",
      "label": "Product price size",
      "min": 12,
      "max": 20,
      "step": 1,
      "unit": "px",
      "default": 14
    },
    {
      "type": "color",
      "id": "product_price_color",
      "label": "Product price color",
      "default": "#78716C"
    },
    {
      "type": "select",
      "id": "product_price_weight",
      "label": "Product price weight",
      "options": [
        { "value": "300", "label": "Light" },
        { "value": "400", "label": "Regular" },
        { "value": "500", "label": "Medium" },
        { "value": "600", "label": "Semibold" },
        { "value": "700", "label": "Bold" }
      ],
      "default": "400"
    }
  ]
}
{% endschema %}
