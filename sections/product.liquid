{% comment %}
  Product section with mobile-first design.
  Features a horizontal scrolling gallery on mobile and split-screen on desktop.
{% endcomment %}

<script type="application/json" data-product-variants>
  {{ product.variants | json }}
</script>

<div class="product-wrapper full-width">
<div
  class="product-container"
  style="
    --eyebrow-size: {{ section.settings.eyebrow_size }}px;
    --eyebrow-color: {{ section.settings.eyebrow_color }};
    --eyebrow-weight: {{ section.settings.eyebrow_weight }};
    --title-size: {{ section.settings.title_size }}px;
    --title-size-desktop: {{ section.settings.title_size_desktop }}px;
    --title-color: {{ section.settings.title_color }};
    --title-weight: {{ section.settings.title_weight }};
    --subtitle-size: {{ section.settings.subtitle_size }}px;
    --subtitle-color: {{ section.settings.subtitle_color }};
    --subtitle-weight: {{ section.settings.subtitle_weight }};
    --price-size: {{ section.settings.price_size }}px;
    --price-size-desktop: {{ section.settings.price_size_desktop }}px;
    --price-color: {{ section.settings.price_color }};
    --price-weight: {{ section.settings.price_weight }};
    --variant-focus-color: {{ section.settings.variant_focus_color }};
    --gallery-arrow-color: {{ section.settings.gallery_arrow_color }};
    --button-size: {{ section.settings.button_size }}px;
    --button-size-desktop: {{ section.settings.button_size_desktop }}px;
    --button-weight: {{ section.settings.button_weight }};
    --button-text-color: {{ section.settings.button_text_color }};
    --button-bg-color: {{ section.settings.button_bg_color }};
    --button-radius: {{ section.settings.button_radius }}px;
    --product-info-bg: {{ section.settings.product_info_bg }};
    --variant-label-size: {{ section.settings.variant_label_size }}px;
    --variant-label-weight: {{ section.settings.variant_label_weight }};
    --variant-label-color: {{ section.settings.variant_label_color }};
    --delivery-label-size: {{ section.settings.delivery_label_size }}px;
    --delivery-label-weight: {{ section.settings.delivery_label_weight }};
    --delivery-label-color: {{ section.settings.delivery_label_color }};
    --delivery-date-size: {{ section.settings.delivery_date_size }}px;
    --delivery-date-weight: {{ section.settings.delivery_date_weight }};
    --delivery-date-color: {{ section.settings.delivery_date_color }};
    --delivery-bg-color: {{ section.settings.delivery_bg_color }};
    --delivery-border-color: {{ section.settings.delivery_border_color }};
    --delivery-border-width: {{ section.settings.delivery_border_width }}px;
  "
>
  {%- comment -%} Image Gallery {%- endcomment -%}
  <div class="product-media-gallery">
    <div class="product-media-track" data-gallery-track>
      {%- for media in product.media -%}
        <div class="product-media-item">
          {%- if media.media_type == 'image' -%}
            {{ media | image_url: width: 1200 | image_tag: loading: 'lazy', class: 'product-media-image' }}
          {%- elsif media.media_type == 'video' -%}
            {{ media | video_tag: autoplay: true, loop: true, muted: true, controls: false }}
          {%- else -%}
            {{ media | media_tag }}
          {%- endif -%}
        </div>
      {%- else -%}
        <div class="product-media-item product-media-placeholder">
          {{ 'product-1' | placeholder_svg_tag: 'placeholder-svg' }}
        </div>
      {%- endfor -%}
    </div>

    {%- if product.media.size > 1 -%}
      <button class="product-media-nav product-media-nav--prev" data-gallery-prev aria-label="Previous image">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M12.5 15L7.5 10L12.5 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
      <button class="product-media-nav product-media-nav--next" data-gallery-next aria-label="Next image">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M7.5 15L12.5 10L7.5 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    {%- endif -%}
  </div>

  {%- comment -%} Lightbox Modal {%- endcomment -%}
  <div class="product-lightbox" data-lightbox>
    <div class="product-lightbox__header">
      <span class="product-lightbox__counter" data-lightbox-counter>1 / {{ product.media.size }}</span>
      <button class="product-lightbox__close" data-lightbox-close aria-label="Close">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </div>
    <div class="product-lightbox__track" data-lightbox-track>
      {%- for media in product.media -%}
        {%- if media.media_type == 'image' -%}
          <div class="product-lightbox__slide">
            {{ media | image_url: width: 1800 | image_tag: loading: 'lazy' }}
          </div>
        {%- endif -%}
      {%- endfor -%}
    </div>
    {%- if product.media.size > 1 -%}
      <button class="product-lightbox__nav product-lightbox__nav--prev" data-lightbox-prev aria-label="Previous">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
      <button class="product-lightbox__nav product-lightbox__nav--next" data-lightbox-next aria-label="Next">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    {%- endif -%}
  </div>

  {%- comment -%} Product Info {%- endcomment -%}
  <div class="product-info-wrapper">
    <div class="product-info">
      {%- comment -%} Eyebrow Text - from metafield or section setting {%- endcomment -%}
      {%- if product.metafields.descriptors.subtitle != blank -%}
        <p class="product-eyebrow">{{ product.metafields.descriptors.subtitle }}</p>
      {%- elsif section.settings.eyebrow_text != blank -%}
        <p class="product-eyebrow">{{ section.settings.eyebrow_text }}</p>
      {%- endif -%}

      {%- comment -%} Title {%- endcomment -%}
      <h1 class="product-title {% if section.settings.title_italic %}product-title--italic{% endif %}">{{ product.title }}</h1>

      {%- comment -%} Subtitle & Price Row {%- endcomment -%}
      <div class="product-subtitle-row">
        {%- if section.settings.subtitle_text != blank -%}
          <p class="product-subtitle">{{ section.settings.subtitle_text }}</p>
        {%- elsif product.has_only_default_variant == false -%}
          <p class="product-subtitle">{{ product.selected_or_first_available_variant.title }}</p>
        {%- elsif product.metafields.custom.subtitle -%}
          <p class="product-subtitle">{{ product.metafields.custom.subtitle }}</p>
        {%- else -%}
          <p class="product-subtitle"></p>
        {%- endif -%}
        <div class="product-price">
          {%- if product.compare_at_price > product.price -%}
            <span class="product-price-sale">{{ product.price | money }}</span>
            <s class="product-price-compare">{{ product.compare_at_price | money }}</s>
          {%- else -%}
            {{ product.price | money }}
          {%- endif -%}
        </div>
      </div>

      {%- comment -%} Add to Cart Form {%- endcomment -%}
      <div class="product-form-container">
        {% form 'product', product, data-product-form: true %}
          {%- comment -%} Variant Selectors {%- endcomment -%}
          {%- unless product.has_only_default_variant -%}
            <div class="product-variants">
              {%- for option in product.options_with_values -%}
                <div class="product-variant-option">
                  <label class="product-variant-label" for="option-{{ option.name | handleize }}-{{ section.id }}">
                    {{ option.name }}
                  </label>
                  <div class="product-variant-select-wrapper">
                    <select
                      id="option-{{ option.name | handleize }}-{{ section.id }}"
                      class="product-variant-select"
                      data-option-position="{{ option.position }}"
                    >
                      {%- for value in option.values -%}
                        {%- assign option_index = 'option' | append: option.position -%}
                        {%- assign is_selected = false -%}
                        {%- if product.selected_or_first_available_variant[option_index] == value -%}
                          {%- assign is_selected = true -%}
                        {%- endif -%}
                        <option value="{{ value | escape }}" {% if is_selected %}selected{% endif %}>
                          {{ value }}
                        </option>
                      {%- endfor -%}
                    </select>
                    <svg class="product-variant-select-icon" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M4 6L8 10L12 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                  </div>
                </div>
              {%- endfor -%}
            </div>
          {%- endunless -%}

          <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}" data-variant-id>

          {%- if section.settings.show_delivery_estimate -%}
            <div class="product-delivery-estimate">
              <span class="product-delivery-estimate__label">{{ section.settings.delivery_label }}</span>
              <span class="product-delivery-estimate__date" data-delivery-days="{{ section.settings.delivery_days }}"></span>
            </div>
          {%- endif -%}

          <div class="product-add-row">
            <div class="product-quantity-selector">
              <button type="button" class="product-quantity-btn" data-quantity-minus aria-label="Decrease quantity">
                <svg width="12" height="12" viewBox="0 0 12 12" fill="none" stroke="currentColor" stroke-width="1.5">
                  <path d="M2.5 6h7"/>
                </svg>
              </button>
              <input type="number" name="quantity" value="1" min="1" max="99" class="product-quantity-input" data-quantity-input aria-label="Quantity">
              <button type="button" class="product-quantity-btn" data-quantity-plus aria-label="Increase quantity">
                <svg width="12" height="12" viewBox="0 0 12 12" fill="none" stroke="currentColor" stroke-width="1.5">
                  <path d="M6 2.5v7M2.5 6h7"/>
                </svg>
              </button>
            </div>
            <button
              type="submit"
              name="add"
              class="product-add-to-cart-btn"
              data-add-text="{{ section.settings.add_to_cart_text }}"
              data-sold-out-text="{{ section.settings.sold_out_text }}"
              data-price="{{ product.selected_or_first_available_variant.price }}"
              {% unless product.selected_or_first_available_variant.available %}disabled{% endunless %}
            >
              {%- if product.selected_or_first_available_variant.available -%}
                <span data-btn-text>{{ section.settings.add_to_cart_text }}</span> â€” <span data-btn-price>{{ product.selected_or_first_available_variant.price | money }}</span>
              {%- else -%}
                {{ section.settings.sold_out_text }}
              {%- endif -%}
            </button>
          </div>
        {% endform %}
      </div>

      {%- comment -%} Modern Divider {%- endcomment -%}
      <div class="product-divider"></div>

      {%- comment -%} Blocks (Specs, Features, etc) {%- endcomment -%}
      {%- for block in section.blocks -%}
        {%- case block.type -%}
          {%- when '@app' -%}
            {% render block %}

          {%- when 'product_details' -%}
            <div class="product-details" {{ block.shopify_attributes }} style="
              --pd-header-color: {{ block.settings.header_color }};
              --pd-header-size: {{ block.settings.header_size }}px;
              --pd-header-weight: {{ block.settings.header_weight }};
              --pd-desc-color: {{ block.settings.description_color }};
              --pd-desc-size: {{ block.settings.description_size }}px;
              --pd-card-bg: {{ block.settings.card_bg_color }};
              --pd-card-radius: {{ block.settings.card_radius }}px;
              --pd-label-color: {{ block.settings.label_color }};
              --pd-label-size: {{ block.settings.label_size }}px;
              --pd-value-color: {{ block.settings.value_color }};
              --pd-value-size: {{ block.settings.value_size }}px;
              --pd-value-weight: {{ block.settings.value_weight }};
            ">
              {%- comment -%} Description Header Row with Variant Indicators {%- endcomment -%}
              <div class="product-details__header-row">
                {%- if block.settings.description_header != blank -%}
                  <h4 class="product-details__header">{{ block.settings.description_header }}</h4>
                {%- endif -%}
                {%- if product.has_only_default_variant == false -%}
                  <div class="product-details__variant-pills" data-variant-pills>
                    {%- for option in product.options_with_values -%}
                      {%- assign selected_value = product.selected_or_first_available_variant.options[forloop.index0] -%}
                      {%- assign option_name_lower = option.name | downcase -%}
                      <span class="product-details__variant-pill" data-variant-pill data-option-index="{{ forloop.index0 }}" data-option-name="{{ option_name_lower }}">
                        <span class="variant-pill__icon" data-pill-icon>
                          {%- if option_name_lower contains 'color' or option_name_lower contains 'colour' -%}
                            <svg width="14" height="14" viewBox="0 0 14 14" fill="none"><circle cx="7" cy="7" r="6" fill="currentColor" stroke="currentColor" stroke-width="1"/></svg>
                          {%- elsif option_name_lower contains 'size' or selected_value contains '"' or selected_value contains 'x' or selected_value contains 'inch' -%}
                            <svg width="14" height="14" viewBox="0 0 14 14" fill="none" stroke="currentColor" stroke-width="1.2"><rect x="1.5" y="1.5" width="11" height="11" rx="1.5"/><path d="M1.5 4.5h11M4.5 1.5v11"/></svg>
                          {%- else -%}
                            <svg width="14" height="14" viewBox="0 0 14 14" fill="none" stroke="currentColor" stroke-width="1.2"><circle cx="7" cy="7" r="5.5"/></svg>
                          {%- endif -%}
                        </span>
                        <span class="variant-pill__text" data-pill-text>{{ selected_value }}</span>
                      </span>
                    {%- endfor -%}
                  </div>
                {%- endif -%}
              </div>

              {%- comment -%} Description Text {%- endcomment -%}
              {%- if product.metafields.custom.description != blank -%}
                <p class="product-details__description">{{ product.metafields.custom.description }}</p>
              {%- elsif block.settings.description_text != blank -%}
                <p class="product-details__description">{{ block.settings.description_text }}</p>
              {%- endif -%}

              {%- comment -%} Specs Cards Grid {%- endcomment -%}
              <div class="product-details__specs-grid">
                {%- if block.settings.spec_label_1 != blank -%}
                  <div class="product-details__spec-card">
                    <span class="product-details__spec-label">{{ block.settings.spec_label_1 }}</span>
                    <span class="product-details__spec-value">{{ block.settings.spec_value_1 }}</span>
                  </div>
                {%- endif -%}
                {%- if block.settings.spec_label_2 != blank -%}
                  <div class="product-details__spec-card">
                    <span class="product-details__spec-label">{{ block.settings.spec_label_2 }}</span>
                    <span class="product-details__spec-value">{{ block.settings.spec_value_2 }}</span>
                  </div>
                {%- endif -%}
                {%- if block.settings.spec_label_3 != blank -%}
                  <div class="product-details__spec-card">
                    <span class="product-details__spec-label">{{ block.settings.spec_label_3 }}</span>
                    <span class="product-details__spec-value">{{ block.settings.spec_value_3 }}</span>
                  </div>
                {%- endif -%}
                {%- if block.settings.spec_label_4 != blank -%}
                  <div class="product-details__spec-card">
                    <span class="product-details__spec-label">{{ block.settings.spec_label_4 }}</span>
                    <span class="product-details__spec-value">{{ block.settings.spec_value_4 }}</span>
                  </div>
                {%- endif -%}
              </div>

              {%- comment -%} Info Boxes {%- endcomment -%}
              <div class="product-details__info-boxes" style="
                --shipping-bg: {{ block.settings.shipping_box_bg }};
                --shipping-text: {{ block.settings.shipping_box_text }};
                --shipping-img-opacity: {{ block.settings.shipping_box_img_opacity | divided_by: 100.0 }};
                --specs-bg: {{ block.settings.specs_box_bg }};
                --specs-text: {{ block.settings.specs_box_text }};
                --specs-img-opacity: {{ block.settings.specs_box_img_opacity | divided_by: 100.0 }};
              ">
                <a href="{{ block.settings.shipping_box_link }}" class="product-details__info-box product-details__info-box--shipping">
                  {%- if block.settings.shipping_box_image != blank -%}
                    <div class="product-details__info-box-bg">
                      {{ block.settings.shipping_box_image | image_url: width: 400 | image_tag }}
                    </div>
                  {%- endif -%}
                  <span class="product-details__info-box-text">{{ block.settings.shipping_box_text_content }}</span>
                </a>
                <button type="button" class="product-details__info-box product-details__info-box--specs" data-open-specs-modal>
                  {%- if block.settings.specs_box_image != blank -%}
                    <div class="product-details__info-box-bg">
                      {{ block.settings.specs_box_image | image_url: width: 400 | image_tag }}
                    </div>
                  {%- endif -%}
                  <span class="product-details__info-box-text">{{ block.settings.specs_box_text_content }}</span>
                </button>
              </div>
            </div>

            {%- comment -%} Specs Modal {%- endcomment -%}
            <div class="specs-modal" data-specs-modal aria-hidden="true">
              <div class="specs-modal__backdrop" data-close-specs-modal></div>
              <div class="specs-modal__container">
                <div class="specs-modal__header">
                  <h3 class="specs-modal__title">Specifications</h3>
                  <button type="button" class="specs-modal__close" data-close-specs-modal aria-label="Close">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="1.5">
                      <path d="M15 5L5 15M5 5l10 10"/>
                    </svg>
                  </button>
                </div>
                <div class="specs-modal__content">
                  {%- if product.metafields.custom.collapsible_measurement != blank -%}
                    <div class="specs-modal__data" data-specs-content>{{ product.metafields.custom.collapsible_measurement }}</div>
                  {%- else -%}
                    <p class="specs-modal__empty">No specifications available.</p>
                  {%- endif -%}
                </div>
              </div>
            </div>

          {%- when 'specs' -%}
            <div class="product-specs" {{ block.shopify_attributes }}>
              <h3 class="product-specs__title">{{ section.settings.specs_title }}</h3>
              <div class="product-specs__tags">
                {%- if block.settings.spec_1 != blank -%}
                  <span class="product-specs__tag">{{ block.settings.spec_1 }}</span>
                {%- endif -%}
                {%- if block.settings.spec_2 != blank -%}
                  <span class="product-specs__tag">{{ block.settings.spec_2 }}</span>
                {%- endif -%}
                {%- if block.settings.spec_3 != blank -%}
                  <span class="product-specs__tag">{{ block.settings.spec_3 }}</span>
                {%- endif -%}
                {%- if block.settings.spec_4 != blank -%}
                  <span class="product-specs__tag">{{ block.settings.spec_4 }}</span>
                {%- endif -%}
                {%- if block.settings.spec_5 != blank -%}
                  <span class="product-specs__tag">{{ block.settings.spec_5 }}</span>
                {%- endif -%}
                {%- if block.settings.spec_6 != blank -%}
                  <span class="product-specs__tag">{{ block.settings.spec_6 }}</span>
                {%- endif -%}
              </div>
            </div>

          {%- when 'text' -%}
            <p class="product-custom-text" {{ block.shopify_attributes }} style="
              color: {{ block.settings.text_color }};
              text-transform: {{ block.settings.text_transform }};
              font-size: {{ block.settings.font_size }}px;
              font-weight: {{ block.settings.font_weight }};
            ">
              {{ block.settings.text }}
            </p>

          {%- when 'shipping_info' -%}
            <p class="product-shipping-info" {{ block.shopify_attributes }}>
              {{ block.settings.text }}
            </p>

        {%- endcase -%}
      {%- endfor -%}
    </div>
  </div>
</div>
</div>

{% stylesheet %}
  /* Ensure product section works correctly */
  .product-section {
    display: block !important;
    padding: 0;
  }

  .product-container {
    display: flex;
    flex-direction: column;
    width: 100%;
  }

  /* Mobile Gallery - Horizontal scroll */
  .product-media-gallery {
    position: relative;
    width: 100%;
    aspect-ratio: 1 / 1;
    overflow: hidden;
    background-color: #f5f5f5;
  }

  .product-media-track {
    display: flex;
    width: 100%;
    height: 100%;
    overflow-x: auto;
    scroll-snap-type: x mandatory;
    scrollbar-width: none;
    -ms-overflow-style: none;
  }

  .product-media-track::-webkit-scrollbar {
    display: none;
  }

  .product-media-item {
    flex: 0 0 100%;
    width: 100%;
    height: 100%;
    scroll-snap-align: start;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
  }

  .product-media-image,
  .product-media-item img,
  .product-media-item video {
    width: 100%;
    height: 100%;
    object-fit: contain;
  }

  .product-media-placeholder {
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: #f0f0f0;
  }

  .product-media-placeholder .placeholder-svg {
    width: 50%;
    height: auto;
    opacity: 0.5;
  }

  /* Gallery Navigation Arrows - Minimal */
  .product-media-nav {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    width: 40px;
    height: 40px;
    background: transparent;
    border: none;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    color: color-mix(in srgb, var(--gallery-arrow-color, #000) 30%, transparent);
    z-index: 10;
    transition: color 0.2s ease;
  }

  .product-media-nav:hover {
    color: color-mix(in srgb, var(--gallery-arrow-color, #000) 60%, transparent);
  }

  .product-media-nav:active {
    transform: translateY(-50%) scale(0.95);
  }

  .product-media-nav--prev {
    left: 4px;
  }

  .product-media-nav--next {
    right: 4px;
  }

  /* Lightbox */
  .product-lightbox {
    position: fixed;
    inset: 0;
    z-index: 9999;
    background: #000;
    display: none;
    flex-direction: column;
  }

  .product-lightbox.is-open {
    display: flex;
  }

  .product-lightbox__header {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 16px 20px;
    z-index: 10;
  }

  .product-lightbox__counter {
    font-size: 14px;
    color: rgba(255, 255, 255, 0.6);
    font-weight: 400;
  }

  .product-lightbox__close {
    width: 44px;
    height: 44px;
    background: transparent;
    border: none;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    color: rgba(255, 255, 255, 0.6);
    transition: color 0.2s ease;
  }

  .product-lightbox__close:hover {
    color: #fff;
  }

  .product-lightbox__track {
    flex: 1;
    display: flex;
    overflow-x: auto;
    scroll-snap-type: x mandatory;
    scrollbar-width: none;
    -ms-overflow-style: none;
    touch-action: pan-x;
  }

  .product-lightbox__track::-webkit-scrollbar {
    display: none;
  }

  .product-lightbox__slide {
    flex: 0 0 100%;
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    scroll-snap-align: start;
    padding: 60px 20px;
  }

  .product-lightbox__slide img {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
  }

  .product-lightbox__nav {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    width: 50px;
    height: 50px;
    background: transparent;
    border: none;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    color: rgba(255, 255, 255, 0.4);
    z-index: 10;
    transition: color 0.2s ease;
  }

  .product-lightbox__nav:hover {
    color: rgba(255, 255, 255, 0.8);
  }

  .product-lightbox__nav--prev {
    left: 10px;
  }

  .product-lightbox__nav--next {
    right: 10px;
  }

  @media screen and (min-width: 768px) {
    .product-lightbox__slide {
      padding: 80px 60px;
    }

    .product-lightbox__nav {
      width: 60px;
      height: 60px;
    }

    .product-lightbox__nav--prev {
      left: 20px;
    }

    .product-lightbox__nav--next {
      right: 20px;
    }
  }

  /* Product Info - Overlapping card */
  .product-info-wrapper {
    position: relative;
    margin-top: -24px;
    z-index: 10;
    padding: 0;
  }

  .product-info {
    background: var(--product-info-bg, #ffffff);
    border-radius: 24px 24px 0 0;
    padding: 1.5rem 1.25rem 2rem;
    box-shadow: 0 -4px 20px rgba(0,0,0,0.08);
    min-height: 40vh;
  }

  /* Eyebrow Text */
  .product-eyebrow {
    font-size: var(--eyebrow-size, 12px);
    font-weight: var(--eyebrow-weight, 500);
    color: var(--eyebrow-color, #D97706);
    text-transform: uppercase;
    letter-spacing: 0.1em;
    margin: 0 0 0.5rem;
  }

  /* Title */
  .product-title {
    font-family: var(--font-heading-family, serif);
    font-size: var(--title-size, 28px);
    font-weight: var(--title-weight, 400);
    color: var(--title-color, #1C1917);
    margin: 0 0 0.25rem;
    line-height: 1.2;
  }

  .product-title--italic {
    font-style: italic;
  }

  /* Subtitle & Price Row */
  .product-subtitle-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 1rem;
    margin-bottom: 1rem;
  }

  .product-subtitle {
    font-size: var(--subtitle-size, 15px);
    font-weight: var(--subtitle-weight, 400);
    color: var(--subtitle-color, #78716C);
    margin: 0;
  }

  .product-price {
    font-size: var(--price-size, 20px);
    font-weight: var(--price-weight, 500);
    color: var(--price-color, #1C1917);
    white-space: nowrap;
  }

  .product-price-sale {
    color: #DC2626;
  }

  .product-price-compare {
    font-size: calc(var(--price-size, 20px) * 0.8);
    color: #9CA3AF;
    margin-left: 0.5rem;
  }

  /* Variant Selectors - Dropdown style with floating labels */
  .product-variants {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    margin-bottom: 1.25rem;
  }

  .product-variant-option {
    position: relative;
  }

  .product-variant-label {
    position: absolute;
    top: -8px;
    left: 12px;
    background: var(--product-info-bg, #ffffff);
    padding: 0 6px;
    font-family: var(--font-primary-family), sans-serif;
    font-size: var(--variant-label-size, 11px);
    font-weight: var(--variant-label-weight, 500);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--variant-label-color, #78716C);
    z-index: 1;
  }

  .product-variant-select-wrapper {
    position: relative;
    width: 100%;
  }

  .product-variant-select {
    width: 100%;
    padding: 1rem 2.5rem 1rem 1rem;
    font-size: 1rem;
    font-family: inherit;
    color: #1C1917;
    background: #fff;
    border: 1px solid #E5E5E5;
    border-radius: 8px;
    appearance: none;
    -webkit-appearance: none;
    cursor: pointer;
    transition: border-color 0.2s ease;
  }

  .product-variant-select:hover {
    border-color: #D4D4D4;
  }

  .product-variant-select:focus {
    outline: none;
    border-color: var(--variant-focus-color, #D97706);
  }

  .product-variant-select-icon {
    position: absolute;
    right: 1rem;
    top: 50%;
    transform: translateY(-50%);
    pointer-events: none;
    color: #78716C;
  }

  /* Add to Cart Button */
  .product-form-container {
    margin: 1.25rem 0;
  }

  .product-add-row {
    display: flex;
    gap: 0.625rem;
    align-items: stretch;
  }

  .product-quantity-selector {
    display: flex;
    align-items: center;
    border: 1px solid #E7E5E4;
    background: #ffffff;
    flex-shrink: 0;
  }

  .product-quantity-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 36px;
    height: 100%;
    background: none;
    border: none;
    color: #57534E;
    cursor: pointer;
    transition: color 0.15s ease, background-color 0.15s ease;
  }

  .product-quantity-btn:hover {
    color: #1C1917;
    background: #F5F5F4;
  }

  .product-quantity-input {
    width: 32px;
    height: 100%;
    border: none;
    background: none;
    text-align: center;
    font-family: var(--font-primary-family), sans-serif;
    font-size: 13px;
    font-weight: 500;
    color: #1C1917;
    -moz-appearance: textfield;
  }

  .product-quantity-input::-webkit-outer-spin-button,
  .product-quantity-input::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }

  .product-quantity-input:focus {
    outline: none;
  }

  .product-add-to-cart-btn {
    width: 100%;
    background-color: var(--button-bg-color, #1C1917);
    color: var(--button-text-color, #ffffff);
    border: none;
    border-radius: 0;
    padding: 1rem 1.5rem;
    font-family: var(--font-primary-family), sans-serif;
    font-size: var(--button-size, 15px);
    font-weight: var(--button-weight, 500);
    letter-spacing: 0.02em;
    cursor: pointer;
    transition: background-color 0.15s ease, opacity 0.15s ease;
  }

  .product-add-to-cart-btn:hover {
    opacity: 0.9;
  }

  .product-add-to-cart-btn:active {
    opacity: 0.8;
  }

  .product-add-to-cart-btn:disabled {
    background-color: #D1D5DB;
    cursor: not-allowed;
    opacity: 1;
  }

  /* Modern Divider */
  .product-divider {
    width: 100%;
    height: 1px;
    background: linear-gradient(90deg, transparent, #D6D3D1 20%, #D6D3D1 80%, transparent);
    margin: 1.75rem 0;
  }

  /* Delivery Estimate */
  .product-delivery-estimate {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: var(--delivery-bg-color, #F5F5F4);
    padding: 0.875rem 1rem;
    border-radius: 0;
    margin-bottom: 1rem;
    border: var(--delivery-border-width, 1px) solid var(--delivery-border-color, #E5E5E5);
  }

  .product-delivery-estimate__label {
    font-family: var(--font-primary-family), sans-serif;
    font-size: var(--delivery-label-size, 13px);
    font-weight: var(--delivery-label-weight, 400);
    color: var(--delivery-label-color, #57534E);
  }

  .product-delivery-estimate__date {
    font-family: var(--font-primary-family), sans-serif;
    font-size: var(--delivery-date-size, 13px);
    font-weight: var(--delivery-date-weight, 600);
    color: var(--delivery-date-color, #1C1917);
  }

  /* Product Details Section */
  .product-details {
    margin-top: 1.5rem;
  }

  .product-details__header-row {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    margin-bottom: 0.75rem;
  }

  .product-details__header {
    font-family: var(--font-primary-family), sans-serif;
    font-size: var(--pd-header-size, 11px);
    font-weight: var(--pd-header-weight, 600);
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--pd-header-color, #78716C);
    margin: 0;
  }

  .product-details__variant-pills {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    flex-wrap: wrap;
  }

  .product-details__variant-pill {
    display: inline-flex;
    align-items: center;
    gap: 0.375rem;
    font-family: var(--font-primary-family), sans-serif;
    font-size: 12px;
    font-weight: 400;
    color: #44403C;
    background: #ffffff;
    padding: 0.375rem 0.75rem;
    border-radius: 100px;
    border: 1px solid #E7E5E4;
    white-space: nowrap;
  }

  .variant-pill__icon {
    display: flex;
    align-items: center;
    justify-content: center;
    color: #A8A29E;
  }

  .variant-pill__icon svg {
    width: 14px;
    height: 14px;
  }

  .variant-pill__text {
    line-height: 1;
  }

  .product-details__description {
    font-family: var(--font-primary-family), sans-serif;
    font-size: var(--pd-desc-size, 15px);
    line-height: 1.7;
    color: var(--pd-desc-color, #57534E);
    margin: 0 0 1.25rem;
  }

  /* Specs Cards Grid */
  .product-details__specs-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 0.625rem;
    margin-bottom: 1rem;
  }

  .product-details__spec-card {
    background: var(--pd-card-bg, #F5F5F4);
    border-radius: var(--pd-card-radius, 8px);
    padding: 0.875rem 1rem;
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
  }

  .product-details__spec-label {
    font-family: var(--font-primary-family), sans-serif;
    font-size: var(--pd-label-size, 11px);
    color: var(--pd-label-color, #9CA3AF);
  }

  .product-details__spec-value {
    font-family: var(--font-primary-family), sans-serif;
    font-size: var(--pd-value-size, 15px);
    font-weight: var(--pd-value-weight, 500);
    color: var(--pd-value-color, #1C1917);
  }

  /* Info Boxes */
  .product-details__info-boxes {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 0.625rem;
    margin-top: 0.625rem;
  }

  .product-details__info-box {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 1rem;
    min-height: 52px;
    text-decoration: none;
    border: none;
    cursor: pointer;
    overflow: hidden;
    transition: opacity 0.15s ease;
  }

  .product-details__info-box:hover {
    opacity: 0.9;
  }

  .product-details__info-box--shipping {
    background: var(--shipping-bg, #1C1917);
  }

  .product-details__info-box--specs {
    background: var(--specs-bg, #F5F5F4);
  }

  .product-details__info-box-bg {
    position: absolute;
    inset: 0;
    z-index: 0;
    overflow: hidden;
  }

  .product-details__info-box--shipping .product-details__info-box-bg {
    opacity: var(--shipping-img-opacity, 0.3);
  }

  .product-details__info-box--specs .product-details__info-box-bg {
    opacity: var(--specs-img-opacity, 0.3);
  }

  .product-details__info-box-bg img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .product-details__info-box-text {
    position: relative;
    z-index: 1;
    font-family: var(--font-primary-family), sans-serif;
    font-size: 13px;
    font-weight: 500;
  }

  .product-details__info-box--shipping .product-details__info-box-text {
    color: var(--shipping-text, #ffffff);
  }

  .product-details__info-box--specs .product-details__info-box-text {
    color: var(--specs-text, #1C1917);
  }

  /* Specs Modal */
  .specs-modal {
    position: fixed;
    inset: 0;
    z-index: 1000;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.25s ease, visibility 0.25s ease;
  }

  .specs-modal[aria-hidden="false"] {
    opacity: 1;
    visibility: visible;
  }

  .specs-modal__backdrop {
    position: absolute;
    inset: 0;
    background: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(4px);
  }

  .specs-modal__container {
    position: relative;
    width: 90%;
    max-width: 480px;
    max-height: 85vh;
    background: #ffffff;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    transform: translateY(20px);
    transition: transform 0.25s ease;
  }

  .specs-modal[aria-hidden="false"] .specs-modal__container {
    transform: translateY(0);
  }

  .specs-modal__header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 1.25rem 1.5rem;
    border-bottom: 1px solid #E7E5E4;
  }

  .specs-modal__title {
    font-family: var(--font-primary-family), sans-serif;
    font-size: 1rem;
    font-weight: 600;
    color: #1C1917;
    margin: 0;
  }

  .specs-modal__close {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 32px;
    height: 32px;
    background: none;
    border: none;
    color: #78716C;
    cursor: pointer;
    transition: color 0.15s ease;
  }

  .specs-modal__close:hover {
    color: #1C1917;
  }

  .specs-modal__content {
    padding: 1.5rem;
    overflow-y: auto;
    flex: 1;
  }

  .specs-modal__data {
    display: none;
  }

  .specs-modal__list {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .specs-modal__section {
    margin-bottom: 1.5rem;
  }

  .specs-modal__section:last-child {
    margin-bottom: 0;
  }

  .specs-modal__section-title {
    font-family: var(--font-primary-family), sans-serif;
    font-size: 11px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: #A8A29E;
    margin: 0 0 0.75rem;
    padding-bottom: 0.5rem;
    border-bottom: 1px solid #F5F5F4;
  }

  .specs-modal__item {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    padding: 0.625rem 0;
    border-bottom: 1px solid #F5F5F4;
    gap: 1rem;
  }

  .specs-modal__item:last-child {
    border-bottom: none;
  }

  .specs-modal__label {
    font-family: var(--font-primary-family), sans-serif;
    font-size: 13px;
    color: #78716C;
    flex-shrink: 0;
  }

  .specs-modal__value {
    font-family: var(--font-primary-family), sans-serif;
    font-size: 13px;
    font-weight: 500;
    color: #1C1917;
    text-align: right;
  }

  .specs-modal__value--full {
    text-align: left;
    width: 100%;
  }

  .specs-modal__empty {
    font-family: var(--font-primary-family), sans-serif;
    font-size: 14px;
    color: #78716C;
    text-align: center;
    margin: 0;
  }

  /* Specs */
  .product-specs {
    margin-top: 1.5rem;
    padding-top: 1.25rem;
    border-top: 1px solid #E5E7EB;
  }

  .product-specs__title {
    font-size: 0.6875rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.15em;
    color: #9CA3AF;
    margin: 0 0 0.75rem;
  }

  .product-specs__tags {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 0.5rem;
  }

  .product-specs__tag {
    background-color: #F5F5F4;
    color: #1C1917;
    font-size: 0.8125rem;
    padding: 0.625rem 0.875rem;
    border-radius: 6px;
    text-align: center;
  }

  /* Custom Text Block */
  .product-custom-text {
    margin: 0.5rem 0;
    letter-spacing: 0.05em;
  }

  /* Shipping Info */
  .product-shipping-info {
    text-align: center;
    font-size: 0.8125rem;
    color: #9CA3AF;
    margin: 1rem 0 0;
  }

  /* Desktop Layout */
  @media screen and (min-width: 768px) {
    .product-container {
      flex-direction: row;
      max-width: var(--page-width, 1440px);
      margin: 0 auto;
      padding: 2rem;
      gap: 3rem;
    }

    .product-media-gallery {
      flex: 1;
      aspect-ratio: auto;
      height: auto;
      border-radius: 12px;
      overflow: hidden;
    }

    .product-media-track {
      flex-direction: column;
      overflow-x: visible;
      overflow-y: auto;
      scroll-snap-type: none;
    }

    .product-media-item {
      flex: 0 0 auto;
      height: auto;
      aspect-ratio: 1 / 1;
    }

    .product-media-nav {
      display: none;
    }

    .product-info-wrapper {
      flex: 1;
      margin-top: 0;
      position: sticky;
      top: 100px;
      align-self: flex-start;
    }

    .product-info {
      background: var(--product-info-bg, #ffffff);
      border-radius: 0;
      box-shadow: none;
      padding: 0;
      min-height: auto;
      max-width: 480px;
    }

    .product-title {
      font-size: var(--title-size-desktop, 40px);
    }

    .product-price {
      font-size: var(--price-size-desktop, 24px);
    }

    .product-specs__tags {
      grid-template-columns: repeat(2, 1fr);
    }

    .product-add-to-cart-btn {
      font-size: var(--button-size-desktop, 16px);
    }
  }

  @media screen and (min-width: 1024px) {
    .product-container {
      padding: 3rem 4rem;
      gap: 4rem;
    }

    .product-title {
      font-size: var(--title-size-desktop, 48px);
    }
  }
{% endstylesheet %}

{% javascript %}
  // Delivery date calculation
  const deliveryDateEl = document.querySelector('[data-delivery-days]');
  if (deliveryDateEl) {
    const daysToAdd = parseInt(deliveryDateEl.dataset.deliveryDays) || 5;
    const deliveryDate = new Date();
    deliveryDate.setDate(deliveryDate.getDate() + daysToAdd);

    const options = { weekday: 'long', month: 'short', day: 'numeric' };
    deliveryDateEl.textContent = deliveryDate.toLocaleDateString('en-US', options);
  }

  // Gallery navigation
  const galleryTrack = document.querySelector('[data-gallery-track]');
  const prevBtn = document.querySelector('[data-gallery-prev]');
  const nextBtn = document.querySelector('[data-gallery-next]');

  let currentIndex = 0;
  const items = galleryTrack ? galleryTrack.querySelectorAll('.product-media-item') : [];
  const totalItems = items.length;

  // Navigate to specific index
  function goToSlide(index) {
    if (!galleryTrack || totalItems === 0) return;

    // Wrap around
    if (index < 0) index = totalItems - 1;
    if (index >= totalItems) index = 0;

    currentIndex = index;
    items[currentIndex].scrollIntoView({ behavior: 'smooth', inline: 'start', block: 'nearest' });
  }

  // Track current index on scroll
  if (galleryTrack) {
    galleryTrack.addEventListener('scroll', () => {
      const scrollLeft = galleryTrack.scrollLeft;
      const itemWidth = galleryTrack.offsetWidth;
      currentIndex = Math.round(scrollLeft / itemWidth);
    }, { passive: true });
  }

  // Arrow navigation
  if (prevBtn) {
    prevBtn.addEventListener('click', () => goToSlide(currentIndex - 1));
  }
  if (nextBtn) {
    nextBtn.addEventListener('click', () => goToSlide(currentIndex + 1));
  }

  // Lightbox functionality
  const lightbox = document.querySelector('[data-lightbox]');
  const lightboxTrack = document.querySelector('[data-lightbox-track]');
  const lightboxCounter = document.querySelector('[data-lightbox-counter]');
  const lightboxClose = document.querySelector('[data-lightbox-close]');
  const lightboxPrev = document.querySelector('[data-lightbox-prev]');
  const lightboxNext = document.querySelector('[data-lightbox-next]');
  const lightboxSlides = lightboxTrack ? lightboxTrack.querySelectorAll('.product-lightbox__slide') : [];
  const totalLightboxSlides = lightboxSlides.length;
  let lightboxIndex = 0;

  function openLightbox(index = 0) {
    if (!lightbox) return;
    lightboxIndex = index;
    lightbox.classList.add('is-open');
    document.body.style.overflow = 'hidden';
    goToLightboxSlide(lightboxIndex, false);
    updateLightboxCounter();
  }

  function closeLightbox() {
    if (!lightbox) return;
    lightbox.classList.remove('is-open');
    document.body.style.overflow = '';
  }

  function goToLightboxSlide(index, smooth = true) {
    if (!lightboxTrack || totalLightboxSlides === 0) return;
    if (index < 0) index = totalLightboxSlides - 1;
    if (index >= totalLightboxSlides) index = 0;
    lightboxIndex = index;
    lightboxSlides[lightboxIndex].scrollIntoView({ behavior: smooth ? 'smooth' : 'instant', inline: 'start', block: 'nearest' });
    updateLightboxCounter();
  }

  function updateLightboxCounter() {
    if (lightboxCounter) {
      lightboxCounter.textContent = (lightboxIndex + 1) + ' / ' + totalLightboxSlides;
    }
  }

  // Open lightbox when clicking gallery images
  if (galleryTrack) {
    galleryTrack.addEventListener('click', (e) => {
      const mediaItem = e.target.closest('.product-media-item');
      if (mediaItem) {
        const index = Array.from(items).indexOf(mediaItem);
        openLightbox(index >= 0 ? index : 0);
      }
    });
  }

  // Close lightbox
  if (lightboxClose) {
    lightboxClose.addEventListener('click', closeLightbox);
  }

  // Lightbox navigation
  if (lightboxPrev) {
    lightboxPrev.addEventListener('click', () => goToLightboxSlide(lightboxIndex - 1));
  }
  if (lightboxNext) {
    lightboxNext.addEventListener('click', () => goToLightboxSlide(lightboxIndex + 1));
  }

  // Update counter on scroll
  if (lightboxTrack) {
    lightboxTrack.addEventListener('scroll', () => {
      const scrollLeft = lightboxTrack.scrollLeft;
      const slideWidth = lightboxTrack.offsetWidth;
      lightboxIndex = Math.round(scrollLeft / slideWidth);
      updateLightboxCounter();
    }, { passive: true });
  }

  // Close on escape key
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && lightbox && lightbox.classList.contains('is-open')) {
      closeLightbox();
    }
    if (lightbox && lightbox.classList.contains('is-open')) {
      if (e.key === 'ArrowLeft') goToLightboxSlide(lightboxIndex - 1);
      if (e.key === 'ArrowRight') goToLightboxSlide(lightboxIndex + 1);
    }
  });

  // Close when clicking outside the image
  if (lightbox) {
    lightbox.addEventListener('click', (e) => {
      if (e.target === lightbox || e.target.classList.contains('product-lightbox__slide')) {
        closeLightbox();
      }
    });
  }

  // Helper to format money (Shopify prices are in cents)
  function formatMoney(cents) {
    return '$' + (cents / 100).toFixed(2).replace(/\d(?=(\d{3})+\.)/g, '$&,');
  }

  // Quantity selector
  const quantityInput = document.querySelector('[data-quantity-input]');
  const quantityMinus = document.querySelector('[data-quantity-minus]');
  const quantityPlus = document.querySelector('[data-quantity-plus]');

  // Store base price for quantity calculations
  const addBtn = document.querySelector('.product-add-to-cart-btn');
  let basePrice = addBtn ? parseInt(addBtn.dataset.price) : 0;

  function updateButtonPrice() {
    if (!quantityInput || !addBtn) return;
    const qty = parseInt(quantityInput.value) || 1;
    const totalPrice = basePrice * qty;
    const btnPriceEl = addBtn.querySelector('[data-btn-price]');
    if (btnPriceEl) {
      btnPriceEl.textContent = formatMoney(totalPrice);
    }
  }

  // Update base price when variant changes
  window.updateBasePrice = function(newPrice) {
    basePrice = newPrice;
    updateButtonPrice();
  };

  if (quantityInput && quantityMinus && quantityPlus) {
    quantityMinus.addEventListener('click', () => {
      const currentVal = parseInt(quantityInput.value) || 1;
      if (currentVal > 1) {
        quantityInput.value = currentVal - 1;
        updateButtonPrice();
      }
    });

    quantityPlus.addEventListener('click', () => {
      const currentVal = parseInt(quantityInput.value) || 1;
      if (currentVal < 99) {
        quantityInput.value = currentVal + 1;
        updateButtonPrice();
      }
    });

    quantityInput.addEventListener('change', () => {
      let val = parseInt(quantityInput.value) || 1;
      if (val < 1) val = 1;
      if (val > 99) val = 99;
      quantityInput.value = val;
      updateButtonPrice();
    });
  }

  // Variant selection and cart handling
  const variantsDataEl = document.querySelector('[data-product-variants]');
  let productVariants = [];

  if (variantsDataEl) {
    try {
      productVariants = JSON.parse(variantsDataEl.textContent);
    } catch (e) {
      console.error('Error parsing variants:', e);
    }
  }

  // Get initial variant ID from the hidden input and store globally
  const initialInput = document.querySelector('input[name="id"]');
  window.currentProductVariantId = initialInput ? initialInput.value : null;

  // Variant select change handler
  document.addEventListener('change', (e) => {
    const select = e.target.closest('.product-variant-select');
    if (!select) return;

    // Collect all selected options in order
    const selectedOptions = [];
    document.querySelectorAll('.product-variant-select').forEach(sel => {
      selectedOptions.push(sel.value);
    });

    // Find matching variant by comparing options array
    const matchingVariant = productVariants.find(variant => {
      // Try matching with options array first
      if (variant.options && Array.isArray(variant.options)) {
        return variant.options.every((opt, index) => opt === selectedOptions[index]);
      }
      // Fallback to option1, option2, option3 properties
      for (let i = 0; i < selectedOptions.length; i++) {
        const optionKey = 'option' + (i + 1);
        if (variant[optionKey] !== selectedOptions[i]) {
          return false;
        }
      }
      return true;
    });

    if (matchingVariant) {
      // Store the variant ID globally on window
      window.currentProductVariantId = matchingVariant.id;

      // Also update the hidden input
      const variantInput = document.querySelector('input[name="id"]');
      if (variantInput) {
        variantInput.value = matchingVariant.id;
      }

      // Update URL without reload
      const newUrl = window.location.pathname + '?variant=' + matchingVariant.id;
      history.replaceState(null, null, newUrl);

      // Update price display in header
      const priceEl = document.querySelector('.product-price');
      if (priceEl && matchingVariant.price !== undefined) {
        priceEl.innerHTML = formatMoney(matchingVariant.price);
      }

      // Update base price and recalculate with quantity
      if (typeof window.updateBasePrice === 'function' && matchingVariant.price !== undefined) {
        window.updateBasePrice(matchingVariant.price);
      }

      // Update subtitle with variant title
      const subtitleEl = document.querySelector('.product-subtitle');
      if (subtitleEl && matchingVariant.title && matchingVariant.title !== 'Default Title') {
        subtitleEl.textContent = matchingVariant.title;
      }

      // Update variant pills in product details
      const variantPills = document.querySelectorAll('[data-variant-pill]');
      variantPills.forEach(pill => {
        const optionIndex = parseInt(pill.dataset.optionIndex);
        const optionName = pill.dataset.optionName;
        const newValue = selectedOptions[optionIndex];
        if (newValue) {
          const textEl = pill.querySelector('[data-pill-text]');
          if (textEl) {
            textEl.textContent = newValue;
          }
          // Update icon based on value content
          const iconEl = pill.querySelector('[data-pill-icon]');
          if (iconEl) {
            const isColor = optionName.includes('color') || optionName.includes('colour');
            const isSize = optionName.includes('size') || newValue.includes('"') || newValue.includes('x') || newValue.includes('inch');
            if (isColor) {
              iconEl.innerHTML = '<svg width="14" height="14" viewBox="0 0 14 14" fill="none"><circle cx="7" cy="7" r="6" fill="currentColor" stroke="currentColor" stroke-width="1"/></svg>';
            } else if (isSize) {
              iconEl.innerHTML = '<svg width="14" height="14" viewBox="0 0 14 14" fill="none" stroke="currentColor" stroke-width="1.2"><rect x="1.5" y="1.5" width="11" height="11" rx="1.5"/><path d="M1.5 4.5h11M4.5 1.5v11"/></svg>';
            } else {
              iconEl.innerHTML = '<svg width="14" height="14" viewBox="0 0 14 14" fill="none" stroke="currentColor" stroke-width="1.2"><circle cx="7" cy="7" r="5.5"/></svg>';
            }
          }
        }
      });

      // Update button state
      const addBtnVariant = document.querySelector('.product-add-to-cart-btn');
      if (addBtnVariant) {
        const addText = addBtnVariant.dataset.addText || 'Add to Cart';
        const soldOutText = addBtnVariant.dataset.soldOutText || 'Sold out';
        if (matchingVariant.available) {
          addBtnVariant.disabled = false;
          // Get current quantity for price calculation
          const qtyInput = document.querySelector('[data-quantity-input]');
          const qty = qtyInput ? parseInt(qtyInput.value) || 1 : 1;
          const totalPrice = matchingVariant.price * qty;
          addBtnVariant.innerHTML = '<span data-btn-text>' + addText + '</span> â€” <span data-btn-price>' + formatMoney(totalPrice) + '</span>';
        } else {
          addBtnVariant.disabled = true;
          addBtnVariant.innerHTML = soldOutText;
        }
      }
    }
  });

  // Handle add to cart form submission
  document.addEventListener('submit', async (e) => {
    const form = e.target.closest('[data-product-form]');
    if (!form) return;

    e.preventDefault();

    const submitBtn = form.querySelector('[type="submit"]');

    // Use the global variant ID
    const variantId = window.currentProductVariantId;

    // Get quantity from input
    const qtyInput = form.querySelector('[data-quantity-input]');
    const quantity = qtyInput ? parseInt(qtyInput.value) || 1 : 1;

    if (!variantId) {
      alert('Please select a variant');
      return;
    }

    submitBtn.disabled = true;
    const originalHTML = submitBtn.innerHTML;
    submitBtn.textContent = 'Adding...';

    try {
      // Use JSON body with the tracked variant ID and quantity
      const response = await fetch('/cart/add.js', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({
          id: parseInt(variantId),
          quantity: quantity
        })
      });

      if (response.ok) {
        // Fetch updated cart drawer content
        const sectionResponse = await fetch('/?sections=cart-drawer');
        if (sectionResponse.ok) {
          const sections = await sectionResponse.json();
          const cartDrawerHtml = sections['cart-drawer'];

          // Update cart drawer content
          const cartDrawer = document.querySelector('[data-cart-drawer]');
          if (cartDrawer && cartDrawerHtml) {
            const temp = document.createElement('div');
            temp.innerHTML = cartDrawerHtml;
            const newDrawer = temp.querySelector('[data-cart-drawer]');
            if (newDrawer) {
              cartDrawer.innerHTML = newDrawer.innerHTML;
            }
          }

          // Update cart count in header
          const cartResponse = await fetch('/cart.js');
          if (cartResponse.ok) {
            const cart = await cartResponse.json();
            const cartCount = document.querySelector('.header__cart-count');
            if (cartCount) {
              cartCount.textContent = cart.item_count;
            } else if (cart.item_count > 0) {
              const cartIcon = document.querySelector('.header__cart');
              if (cartIcon) {
                const countSpan = document.createElement('span');
                countSpan.className = 'header__cart-count';
                countSpan.textContent = cart.item_count;
                cartIcon.appendChild(countSpan);
              }
            }
          }
        }

        // Open cart drawer after content is updated
        if (typeof window.openCartDrawer === 'function') {
          window.openCartDrawer();
        } else {
          document.dispatchEvent(new CustomEvent('cart:open'));
        }

        // Reset button
        submitBtn.disabled = false;
        submitBtn.innerHTML = originalHTML;
      } else {
        const error = await response.json();
        alert(error.description || 'Error adding to cart');
        submitBtn.disabled = false;
        submitBtn.innerHTML = originalHTML;
      }
    } catch (error) {
      console.error('Error:', error);
      submitBtn.disabled = false;
      submitBtn.innerHTML = originalHTML;
    }
  });

  // Specs Modal functionality
  const specsModal = document.querySelector('[data-specs-modal]');
  const openSpecsBtn = document.querySelector('[data-open-specs-modal]');
  const closeSpecsBtns = document.querySelectorAll('[data-close-specs-modal]');
  const specsContent = document.querySelector('[data-specs-content]');

  // Parse HTML rendered specs (when metafield outputs as HTML)
  function parseHtmlSpecs(html) {
    const sections = [];
    let currentSection = { title: '', items: [] };

    // Create temp element to parse HTML
    const temp = document.createElement('div');
    temp.innerHTML = html;

    // Find all paragraphs (might be section headers) and list items
    const elements = temp.querySelectorAll('p, li');
    elements.forEach(el => {
      const text = el.textContent.trim();
      if (!text) return;

      // Check if it's a header (usually in <em> or <i> and ends with colon)
      const isHeader = (el.tagName === 'P' && (el.querySelector('em, i') || text.endsWith(':')));

      if (isHeader && text.endsWith(':')) {
        if (currentSection.items.length > 0 || currentSection.title) {
          sections.push(currentSection);
        }
        currentSection = { title: text.replace(':', ''), items: [] };
      } else if (el.tagName === 'LI') {
        const colonIndex = text.indexOf(':');
        if (colonIndex > 0) {
          currentSection.items.push({
            label: text.substring(0, colonIndex).trim(),
            value: text.substring(colonIndex + 1).trim()
          });
        } else {
          currentSection.items.push({ label: '', value: text });
        }
      }
    });

    if (currentSection.items.length > 0 || currentSection.title) {
      sections.push(currentSection);
    }

    return { sections, plainText: null };
  }

  function parseRichTextJson(data) {
    // Handle Shopify rich text metafield JSON format
    let parsed;
    try {
      // Try to parse as JSON (might be double-encoded)
      parsed = typeof data === 'string' ? JSON.parse(data) : data;
      // Check if it was double-encoded
      if (typeof parsed === 'string') {
        parsed = JSON.parse(parsed);
      }
    } catch (e) {
      // If it's not valid JSON, try to extract from HTML or return as plain text
      // Check if it looks like HTML
      if (data.includes('<') && data.includes('>')) {
        return parseHtmlSpecs(data);
      }
      return { sections: [], plainText: data };
    }

    if (!parsed || !parsed.children) {
      // Might be plain text or different format
      return { sections: [], plainText: data };
    }

    const sections = [];
    let currentSection = { title: '', items: [] };

    parsed.children.forEach(child => {
      if (child.type === 'paragraph' && child.children) {
        // Check if it's a section header (italic text ending with colon)
        const textNode = child.children[0];
        if (textNode && textNode.value) {
          const text = textNode.value.trim();
          if (textNode.italic && text.endsWith(':')) {
            // Start a new section
            if (currentSection.items.length > 0 || currentSection.title) {
              sections.push(currentSection);
            }
            currentSection = { title: text.replace(':', ''), items: [] };
          }
        }
      } else if (child.type === 'list' && child.children) {
        // Process list items
        child.children.forEach(listItem => {
          if (listItem.type === 'list-item' && listItem.children) {
            const textNode = listItem.children[0];
            if (textNode && textNode.value) {
              const text = textNode.value.trim();
              // Try to split by colon for label: value format
              const colonIndex = text.indexOf(':');
              if (colonIndex > 0) {
                const label = text.substring(0, colonIndex).trim();
                const value = text.substring(colonIndex + 1).trim();
                currentSection.items.push({ label, value });
              } else {
                // Just a plain item
                currentSection.items.push({ label: '', value: text });
              }
            }
          }
        });
      }
    });

    // Add the last section
    if (currentSection.items.length > 0 || currentSection.title) {
      sections.push(currentSection);
    }

    return { sections, plainText: null };
  }

  function renderSpecsModal() {
    if (!specsContent) return;

    const rawData = specsContent.textContent.trim();
    const { sections, plainText } = parseRichTextJson(rawData);

    if (sections.length === 0 && !plainText) return;

    let html = '';

    if (sections.length > 0) {
      sections.forEach(section => {
        html += '<div class="specs-modal__section">';
        if (section.title) {
          html += '<h4 class="specs-modal__section-title">' + section.title + '</h4>';
        }
        html += '<ul class="specs-modal__list">';
        section.items.forEach(item => {
          html += '<li class="specs-modal__item">';
          if (item.label) {
            html += '<span class="specs-modal__label">' + item.label + '</span>';
            html += '<span class="specs-modal__value">' + item.value + '</span>';
          } else {
            html += '<span class="specs-modal__value specs-modal__value--full">' + item.value + '</span>';
          }
          html += '</li>';
        });
        html += '</ul>';
        html += '</div>';
      });
    }

    // Insert after the hidden data element
    const container = specsContent.parentElement;
    const renderedContent = document.createElement('div');
    renderedContent.className = 'specs-modal__rendered';
    renderedContent.innerHTML = html;
    container.appendChild(renderedContent);
  }

  function openSpecsModal() {
    if (!specsModal) return;
    specsModal.setAttribute('aria-hidden', 'false');
    document.body.style.overflow = 'hidden';
  }

  function closeSpecsModal() {
    if (!specsModal) return;
    specsModal.setAttribute('aria-hidden', 'true');
    document.body.style.overflow = '';
  }

  // Initialize
  renderSpecsModal();

  // Event listeners
  if (openSpecsBtn) {
    openSpecsBtn.addEventListener('click', openSpecsModal);
  }

  closeSpecsBtns.forEach(btn => {
    btn.addEventListener('click', closeSpecsModal);
  });

  // Close on escape key
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && specsModal && specsModal.getAttribute('aria-hidden') === 'false') {
      closeSpecsModal();
    }
  });
{% endjavascript %}

{% schema %}
{
  "name": "Product",
  "tag": "section",
  "class": "product-section",
  "blocks": [
    {
      "type": "@app"
    },
    {
      "type": "specs",
      "name": "Specs",
      "settings": [
        {
          "type": "text",
          "id": "spec_1",
          "label": "Spec 1",
          "default": "Solid Brass"
        },
        {
          "type": "text",
          "id": "spec_2",
          "label": "Spec 2",
          "default": "2700K LED"
        },
        {
          "type": "text",
          "id": "spec_3",
          "label": "Spec 3",
          "default": "Dimmable"
        },
        {
          "type": "text",
          "id": "spec_4",
          "label": "Spec 4",
          "default": "5 Year Warranty"
        },
        {
          "type": "text",
          "id": "spec_5",
          "label": "Spec 5"
        },
        {
          "type": "text",
          "id": "spec_6",
          "label": "Spec 6"
        }
      ]
    },
    {
      "type": "text",
      "name": "Custom text",
      "settings": [
        {
          "type": "text",
          "id": "text",
          "label": "Text",
          "default": "Custom text"
        },
        {
          "type": "color",
          "id": "text_color",
          "label": "Color",
          "default": "#78716C"
        },
        {
          "type": "select",
          "id": "text_transform",
          "label": "Text transform",
          "options": [
            { "value": "none", "label": "None" },
            { "value": "uppercase", "label": "Uppercase" }
          ],
          "default": "none"
        },
        {
          "type": "range",
          "id": "font_size",
          "min": 10,
          "max": 24,
          "step": 1,
          "unit": "px",
          "label": "Font size",
          "default": 14
        },
        {
          "type": "range",
          "id": "font_weight",
          "min": 300,
          "max": 700,
          "step": 100,
          "label": "Font weight",
          "default": 400
        }
      ]
    },
    {
      "type": "shipping_info",
      "name": "Shipping info",
      "settings": [
        {
          "type": "text",
          "id": "text",
          "label": "Text",
          "default": "Free shipping on orders over $200"
        }
      ]
    },
    {
      "type": "product_details",
      "name": "Product details",
      "settings": [
        {
          "type": "header",
          "content": "Description"
        },
        {
          "type": "text",
          "id": "description_header",
          "label": "Header text",
          "default": "DESCRIPTION"
        },
        {
          "type": "color",
          "id": "header_color",
          "label": "Header color",
          "default": "#78716C"
        },
        {
          "type": "range",
          "id": "header_size",
          "min": 9,
          "max": 14,
          "step": 1,
          "unit": "px",
          "label": "Header size",
          "default": 11
        },
        {
          "type": "select",
          "id": "header_weight",
          "label": "Header weight",
          "options": [
            { "value": "400", "label": "Regular" },
            { "value": "500", "label": "Medium" },
            { "value": "600", "label": "Semibold" },
            { "value": "700", "label": "Bold" }
          ],
          "default": "600"
        },
        {
          "type": "textarea",
          "id": "description_text",
          "label": "Description text",
          "info": "Leave blank to use metafield custom.description",
          "default": "Minimalist in form, maximalist in texture. The Dune Sconce features a curved sandstone face that acts as a natural diffuser."
        },
        {
          "type": "color",
          "id": "description_color",
          "label": "Description color",
          "default": "#57534E"
        },
        {
          "type": "range",
          "id": "description_size",
          "min": 12,
          "max": 18,
          "step": 1,
          "unit": "px",
          "label": "Description size",
          "default": 15
        },
        {
          "type": "header",
          "content": "Spec cards"
        },
        {
          "type": "color",
          "id": "card_bg_color",
          "label": "Card background",
          "default": "#F5F5F4"
        },
        {
          "type": "range",
          "id": "card_radius",
          "min": 0,
          "max": 20,
          "step": 1,
          "unit": "px",
          "label": "Card corner radius",
          "default": 8
        },
        {
          "type": "color",
          "id": "label_color",
          "label": "Label color",
          "default": "#9CA3AF"
        },
        {
          "type": "range",
          "id": "label_size",
          "min": 9,
          "max": 14,
          "step": 1,
          "unit": "px",
          "label": "Label size",
          "default": 11
        },
        {
          "type": "color",
          "id": "value_color",
          "label": "Value color",
          "default": "#1C1917"
        },
        {
          "type": "range",
          "id": "value_size",
          "min": 12,
          "max": 18,
          "step": 1,
          "unit": "px",
          "label": "Value size",
          "default": 15
        },
        {
          "type": "select",
          "id": "value_weight",
          "label": "Value weight",
          "options": [
            { "value": "400", "label": "Regular" },
            { "value": "500", "label": "Medium" },
            { "value": "600", "label": "Semibold" },
            { "value": "700", "label": "Bold" }
          ],
          "default": "500"
        },
        {
          "type": "header",
          "content": "Spec 1"
        },
        {
          "type": "text",
          "id": "spec_label_1",
          "label": "Label",
          "default": "Dimensions"
        },
        {
          "type": "text",
          "id": "spec_value_1",
          "label": "Value",
          "default": "12\" x 6\""
        },
        {
          "type": "header",
          "content": "Spec 2"
        },
        {
          "type": "text",
          "id": "spec_label_2",
          "label": "Label",
          "default": "Weight"
        },
        {
          "type": "text",
          "id": "spec_value_2",
          "label": "Value",
          "default": "4.2 lbs"
        },
        {
          "type": "header",
          "content": "Spec 3"
        },
        {
          "type": "text",
          "id": "spec_label_3",
          "label": "Label",
          "default": "Bulb"
        },
        {
          "type": "text",
          "id": "spec_value_3",
          "label": "Value",
          "default": "LED 8.5W"
        },
        {
          "type": "header",
          "content": "Spec 4"
        },
        {
          "type": "text",
          "id": "spec_label_4",
          "label": "Label",
          "default": "Finish"
        },
        {
          "type": "text",
          "id": "spec_value_4",
          "label": "Value",
          "default": "Honed"
        },
        {
          "type": "header",
          "content": "Shipping / Returns box"
        },
        {
          "type": "text",
          "id": "shipping_box_text_content",
          "label": "Text",
          "default": "Free shipping & returns"
        },
        {
          "type": "url",
          "id": "shipping_box_link",
          "label": "Link"
        },
        {
          "type": "color",
          "id": "shipping_box_bg",
          "label": "Background color",
          "default": "#1C1917"
        },
        {
          "type": "color",
          "id": "shipping_box_text",
          "label": "Text color",
          "default": "#ffffff"
        },
        {
          "type": "image_picker",
          "id": "shipping_box_image",
          "label": "Background image"
        },
        {
          "type": "range",
          "id": "shipping_box_img_opacity",
          "min": 0,
          "max": 100,
          "step": 5,
          "unit": "%",
          "label": "Image opacity",
          "default": 30
        },
        {
          "type": "header",
          "content": "View full specs box"
        },
        {
          "type": "text",
          "id": "specs_box_text_content",
          "label": "Text",
          "default": "View Full Specs"
        },
        {
          "type": "color",
          "id": "specs_box_bg",
          "label": "Background color",
          "default": "#F5F5F4"
        },
        {
          "type": "color",
          "id": "specs_box_text",
          "label": "Text color",
          "default": "#1C1917"
        },
        {
          "type": "image_picker",
          "id": "specs_box_image",
          "label": "Background image"
        },
        {
          "type": "range",
          "id": "specs_box_img_opacity",
          "min": 0,
          "max": 100,
          "step": 5,
          "unit": "%",
          "label": "Image opacity",
          "default": 30
        }
      ]
    }
  ],
  "settings": [
    {
      "type": "header",
      "content": "Product info background"
    },
    {
      "type": "color",
      "id": "product_info_bg",
      "label": "Background color",
      "default": "#ffffff"
    },
    {
      "type": "header",
      "content": "Eyebrow text"
    },
    {
      "type": "text",
      "id": "eyebrow_text",
      "label": "Eyebrow text",
      "info": "Small text above the title (e.g., 'NEW ARRIVAL')"
    },
    {
      "type": "range",
      "id": "eyebrow_size",
      "min": 10,
      "max": 16,
      "step": 1,
      "unit": "px",
      "label": "Font size",
      "default": 12
    },
    {
      "type": "color",
      "id": "eyebrow_color",
      "label": "Color",
      "default": "#D97706"
    },
    {
      "type": "select",
      "id": "eyebrow_weight",
      "label": "Font weight",
      "options": [
        { "value": "400", "label": "Regular" },
        { "value": "500", "label": "Medium" },
        { "value": "600", "label": "Semibold" },
        { "value": "700", "label": "Bold" }
      ],
      "default": "500"
    },
    {
      "type": "header",
      "content": "Title"
    },
    {
      "type": "range",
      "id": "title_size",
      "min": 20,
      "max": 40,
      "step": 1,
      "unit": "px",
      "label": "Font size (mobile)",
      "default": 28
    },
    {
      "type": "range",
      "id": "title_size_desktop",
      "min": 28,
      "max": 64,
      "step": 1,
      "unit": "px",
      "label": "Font size (desktop)",
      "default": 40
    },
    {
      "type": "color",
      "id": "title_color",
      "label": "Color",
      "default": "#1C1917"
    },
    {
      "type": "select",
      "id": "title_weight",
      "label": "Font weight",
      "options": [
        { "value": "300", "label": "Light" },
        { "value": "400", "label": "Regular" },
        { "value": "500", "label": "Medium" },
        { "value": "600", "label": "Semibold" },
        { "value": "700", "label": "Bold" }
      ],
      "default": "400"
    },
    {
      "type": "checkbox",
      "id": "title_italic",
      "label": "Italic",
      "default": false
    },
    {
      "type": "header",
      "content": "Subtitle"
    },
    {
      "type": "text",
      "id": "subtitle_text",
      "label": "Custom subtitle",
      "info": "Leave blank to show variant title"
    },
    {
      "type": "range",
      "id": "subtitle_size",
      "min": 12,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Font size",
      "default": 15
    },
    {
      "type": "color",
      "id": "subtitle_color",
      "label": "Color",
      "default": "#78716C"
    },
    {
      "type": "select",
      "id": "subtitle_weight",
      "label": "Font weight",
      "options": [
        { "value": "300", "label": "Light" },
        { "value": "400", "label": "Regular" },
        { "value": "500", "label": "Medium" },
        { "value": "600", "label": "Semibold" }
      ],
      "default": "400"
    },
    {
      "type": "header",
      "content": "Price"
    },
    {
      "type": "range",
      "id": "price_size",
      "min": 14,
      "max": 28,
      "step": 1,
      "unit": "px",
      "label": "Font size (mobile)",
      "default": 20
    },
    {
      "type": "range",
      "id": "price_size_desktop",
      "min": 18,
      "max": 36,
      "step": 1,
      "unit": "px",
      "label": "Font size (desktop)",
      "default": 24
    },
    {
      "type": "color",
      "id": "price_color",
      "label": "Color",
      "default": "#1C1917"
    },
    {
      "type": "select",
      "id": "price_weight",
      "label": "Font weight",
      "options": [
        { "value": "400", "label": "Regular" },
        { "value": "500", "label": "Medium" },
        { "value": "600", "label": "Semibold" },
        { "value": "700", "label": "Bold" }
      ],
      "default": "500"
    },
    {
      "type": "header",
      "content": "Button text"
    },
    {
      "type": "text",
      "id": "add_to_cart_text",
      "label": "Add to cart text",
      "default": "Add to cart"
    },
    {
      "type": "text",
      "id": "sold_out_text",
      "label": "Sold out text",
      "default": "Sold out"
    },
    {
      "type": "header",
      "content": "Product details"
    },
    {
      "type": "text",
      "id": "description_header",
      "label": "Description header",
      "default": "DESCRIPTION"
    },
    {
      "type": "textarea",
      "id": "description_text",
      "label": "Description text",
      "info": "Leave blank to use metafield custom.description",
      "default": "Minimalist in form, maximalist in texture. The Dune Sconce features a curved sandstone face that acts as a natural diffuser."
    },
    {
      "type": "text",
      "id": "spec_label_1",
      "label": "Spec 1 label",
      "default": "Dimensions"
    },
    {
      "type": "text",
      "id": "spec_value_1",
      "label": "Spec 1 value",
      "default": "12\" x 6\""
    },
    {
      "type": "text",
      "id": "spec_label_2",
      "label": "Spec 2 label",
      "default": "Weight"
    },
    {
      "type": "text",
      "id": "spec_value_2",
      "label": "Spec 2 value",
      "default": "4.2 lbs"
    },
    {
      "type": "text",
      "id": "spec_label_3",
      "label": "Spec 3 label",
      "default": "Bulb"
    },
    {
      "type": "text",
      "id": "spec_value_3",
      "label": "Spec 3 value",
      "default": "LED 8.5W"
    },
    {
      "type": "text",
      "id": "spec_label_4",
      "label": "Spec 4 label",
      "default": "Finish"
    },
    {
      "type": "text",
      "id": "spec_value_4",
      "label": "Spec 4 value",
      "default": "Honed"
    },
    {
      "type": "header",
      "content": "Specs section"
    },
    {
      "type": "text",
      "id": "specs_title",
      "label": "Specs title",
      "default": "SPECS"
    },
    {
      "type": "color",
      "id": "variant_focus_color",
      "label": "Dropdown focus border color",
      "default": "#D97706"
    },
    {
      "type": "header",
      "content": "Variant label (SIZE, COLOR, etc.)"
    },
    {
      "type": "range",
      "id": "variant_label_size",
      "min": 9,
      "max": 14,
      "step": 1,
      "unit": "px",
      "label": "Font size",
      "default": 11
    },
    {
      "type": "select",
      "id": "variant_label_weight",
      "label": "Font weight",
      "options": [
        { "value": "400", "label": "Regular" },
        { "value": "500", "label": "Medium" },
        { "value": "600", "label": "Semibold" },
        { "value": "700", "label": "Bold" }
      ],
      "default": "500"
    },
    {
      "type": "color",
      "id": "variant_label_color",
      "label": "Color",
      "default": "#78716C"
    },
    {
      "type": "header",
      "content": "Add to cart button"
    },
    {
      "type": "range",
      "id": "button_size",
      "min": 12,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Font size (mobile)",
      "default": 15
    },
    {
      "type": "range",
      "id": "button_size_desktop",
      "min": 14,
      "max": 24,
      "step": 1,
      "unit": "px",
      "label": "Font size (desktop)",
      "default": 16
    },
    {
      "type": "select",
      "id": "button_weight",
      "label": "Font weight",
      "options": [
        { "value": "400", "label": "Regular" },
        { "value": "500", "label": "Medium" },
        { "value": "600", "label": "Semibold" },
        { "value": "700", "label": "Bold" }
      ],
      "default": "500"
    },
    {
      "type": "color",
      "id": "button_text_color",
      "label": "Text color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "button_bg_color",
      "label": "Background color",
      "default": "#1C1917"
    },
    {
      "type": "range",
      "id": "button_radius",
      "min": 0,
      "max": 50,
      "step": 1,
      "unit": "px",
      "label": "Corner radius",
      "default": 50
    },
    {
      "type": "header",
      "content": "Delivery estimate"
    },
    {
      "type": "checkbox",
      "id": "show_delivery_estimate",
      "label": "Show delivery estimate",
      "default": true
    },
    {
      "type": "text",
      "id": "delivery_label",
      "label": "Label text",
      "default": "Estimated Delivery By"
    },
    {
      "type": "range",
      "id": "delivery_days",
      "min": 1,
      "max": 30,
      "step": 1,
      "label": "Days from today",
      "default": 5
    },
    {
      "type": "color",
      "id": "delivery_bg_color",
      "label": "Background color",
      "default": "#F5F5F4"
    },
    {
      "type": "color",
      "id": "delivery_border_color",
      "label": "Border color",
      "default": "#E5E5E5"
    },
    {
      "type": "range",
      "id": "delivery_border_width",
      "min": 0,
      "max": 5,
      "step": 1,
      "unit": "px",
      "label": "Border width",
      "default": 1
    },
    {
      "type": "range",
      "id": "delivery_label_size",
      "min": 10,
      "max": 18,
      "step": 1,
      "unit": "px",
      "label": "Label font size",
      "default": 13
    },
    {
      "type": "select",
      "id": "delivery_label_weight",
      "label": "Label font weight",
      "options": [
        { "value": "400", "label": "Regular" },
        { "value": "500", "label": "Medium" },
        { "value": "600", "label": "Semibold" }
      ],
      "default": "400"
    },
    {
      "type": "color",
      "id": "delivery_label_color",
      "label": "Label color",
      "default": "#57534E"
    },
    {
      "type": "range",
      "id": "delivery_date_size",
      "min": 10,
      "max": 18,
      "step": 1,
      "unit": "px",
      "label": "Date font size",
      "default": 13
    },
    {
      "type": "select",
      "id": "delivery_date_weight",
      "label": "Date font weight",
      "options": [
        { "value": "400", "label": "Regular" },
        { "value": "500", "label": "Medium" },
        { "value": "600", "label": "Semibold" },
        { "value": "700", "label": "Bold" }
      ],
      "default": "600"
    },
    {
      "type": "color",
      "id": "delivery_date_color",
      "label": "Date color",
      "default": "#1C1917"
    },
    {
      "type": "header",
      "content": "Gallery navigation"
    },
    {
      "type": "color",
      "id": "gallery_arrow_color",
      "label": "Arrow color",
      "default": "#000000"
    }
  ],
  "presets": [
    {
      "name": "Product",
      "blocks": [
        {
          "type": "specs"
        }
      ]
    }
  ]
}
{% endschema %}
